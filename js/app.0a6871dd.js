(function(e){function t(t){for(var r,s,o=t[0],c=t[1],l=t[2],u=0,f=[];u<o.length;u++)s=o[u],a[s]&&f.push(a[s][0]),a[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);d&&d(t);while(f.length)f.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={app:0},i=[];function s(e){return o.p+"js/"+({about:"about"}[e]||e)+"."+{about:"6fd7fff8"}[e]+".js"}function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise(function(t,r){n=a[e]=[t,r]});t.push(n[2]=r);var i,c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=s(e),i=function(t){c.onerror=c.onload=null,clearTimeout(l);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src,s=new Error("Loading chunk "+e+" failed.\n("+r+": "+i+")");s.type=r,s.request=i,n[1](s)}a[e]=void 0}};var l=setTimeout(function(){i({type:"timeout",target:c})},12e4);c.onerror=c.onload=i,document.head.appendChild(c)}return Promise.all(t)},o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var d=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"093f":function(e,t,n){"use strict";var r=n("6147"),a=n.n(r);a.a},1977:function(e,t,n){},"1f41":function(e,t,n){},"3a7c":function(e,t,n){"use strict";var r=n("d768"),a=n.n(r);a.a},4678:function(e,t,n){var r={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(e){var t=i(e);return n(t)}function i(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id="4678"},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("c1df"),a=n.n(r),i=n("2b0e");i["a"].filter("formatDate",function(e){if(e)return a()(String(e)).format("DD/MM/YYYY")});n("7514"),n("a481"),n("456d"),n("ac6a");function s(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}var o=function(e){var t={};return Object.keys(e).forEach(function(n){return t[n.replace(/[A-Z]/g,function(e){return"_".concat(e.toLowerCase())})]=e[n]}),t};function c(e,t){return Object.keys(e).find(function(n){return e[n]===t})}var l={BSC:"B.Sc.",MSC:"M.Sc.",PHD:"Ph.D.",PROF:"Prof."};i["a"].filter("formatResearcherName",function(e){if(e){var t=l[e.title];return t?"".concat(t," ").concat(e.firstName," ").concat(e.lastName):"".concat(e.firstName," ").concat(e.lastName)}});var u=n("bb716");n("bf40");i["a"].use(u["a"],{iconfont:"md"});var d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{id:"app"}},[n("v-navigation-drawer",{attrs:{clipped:"",absolute:"",overflow:"",app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("v-list",{attrs:{dense:""}},[n("v-list-tile",{staticClass:"drawer-link",attrs:{to:"/home"}},[n("v-list-tile-action",[n("v-icon",[e._v("\n            home\n          ")])],1),n("v-list-tile-content",[n("v-list-tile-title",[e._v("\n            Home\n          ")])],1)],1),n("v-list-tile",{staticClass:"drawer-link",attrs:{to:"/studies"}},[n("v-list-tile-action",[n("v-icon",[e._v("\n            star\n          ")])],1),n("v-list-tile-content",[n("v-list-tile-title",[e._v("\n            Studies\n          ")])],1)],1),n("v-list-tile",{staticClass:"drawer-link",attrs:{to:"/subjects"}},[n("v-list-tile-action",[n("v-icon",[e._v("\n            people\n          ")])],1),n("v-list-tile-content",[n("v-list-tile-title",[e._v("\n            Subjects\n          ")])],1)],1),n("v-list-group",{attrs:{"prepend-icon":"storage",value:"true","no-action":""},scopedSlots:e._u([{key:"activator",fn:function(){return[n("v-list-tile",[n("v-list-tile-title",[e._v("\n              Data\n            ")])],1)]},proxy:!0}])},[n("v-list-group",{attrs:{"prepend-icon":"blur_on",value:"true","sub-group":"","no-action":""},scopedSlots:e._u([{key:"activator",fn:function(){return[n("v-list-tile",[n("v-list-tile-title",[e._v("\n                MRI\n              ")])],1)]},proxy:!0}])},[n("v-list",[n("v-list-tile",{staticClass:"drawer-link",attrs:{to:"/dicom-browser"}},[n("v-list-tile-title",[e._v("\n                DICOM\n              ")])],1)],1)],1)],1)],1)],1),n("v-toolbar",{attrs:{color:"indigo","clipped-left":"",dark:"",absolute:"",app:""}},[n("v-toolbar-side-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),n("v-toolbar-title",[e._v("pylabber")]),n("v-spacer"),e.isAuthenticated&&e.user?n("div",{staticClass:"text-xs-center"},[n("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-btn",e._g({attrs:{flat:""}},r),[n("v-avatar",{staticClass:"user-avatar",attrs:{size:"36px"}},[n("img",{attrs:{src:e.user.image}})]),e._v("\n            Â  "+e._s(e.user.username)+"\n          ")],1)]}}],null,!1,3091339405)},[n("v-list",[n("router-link",{staticClass:"dropmenu-link",attrs:{to:"/logout"}},[n("v-list-tile",[e._v("Logout")])],1)],1)],1)],1):e._e()],1),n("v-content",[n("v-container",{attrs:{fluid:"","p-4":""}},[n("v-layout",{attrs:{"justify-left":"","align-top":""}},[n("router-view")],1)],1)],1),n("v-footer",{attrs:{color:"indigo",app:""}},[n("span",{staticClass:"white--text"})])],1)},f=[],p=(n("8e6e"),n("bd86")),b=n("2f62");function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach(function(t){Object(p["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h={data:function(){return{drawer:{}}},props:{source:String},computed:v({},Object(b["c"])("auth",["isAuthenticated"]),{},Object(b["e"])("auth",["user"]))},g=h,y=(n("3a7c"),n("2877")),j=n("6544"),S=n.n(j),x=n("7496"),O=n("8212"),_=n("8336"),w=n("a523"),P=n("549c"),D=n("553a"),k=n("132d"),T=n("a722"),C=n("8860"),V=n("56b0"),I=n("ba95"),E=n("40fe"),$=n("5d23"),B=n("e449"),U=n("f774"),N=n("9910"),q=n("71d9"),G=n("706c"),M=n("2a7f"),A=Object(y["a"])(g,d,f,!1,null,"5e3cf802",null),L=A.exports;S()(A,{VApp:x["a"],VAvatar:O["a"],VBtn:_["a"],VContainer:w["a"],VContent:P["a"],VFooter:D["a"],VIcon:k["a"],VLayout:T["a"],VList:C["a"],VListGroup:V["a"],VListTile:I["a"],VListTileAction:E["a"],VListTileContent:$["a"],VListTileTitle:$["b"],VMenu:B["a"],VNavigationDrawer:U["a"],VSpacer:N["a"],VToolbar:q["a"],VToolbarSideIcon:G["a"],VToolbarTitle:M["a"]});var F=n("8c4f"),R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"login-view"}},[n("v-alert",{attrs:{value:e.error,type:"error"}},[e._v("\n    Invalid username or password!\n  ")]),n("form",{on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[n("v-text-field",{attrs:{type:"text",id:"username",label:"Username",required:""},model:{value:e.inputs.username,callback:function(t){e.$set(e.inputs,"username",t)},expression:"inputs.username"}}),n("v-text-field",{attrs:{type:"password",id:"password",label:"Password",required:""},model:{value:e.inputs.password,callback:function(t){e.$set(e.inputs,"password",t)},expression:"inputs.password"}}),n("v-btn",{attrs:{color:"success",id:"login-button"},on:{click:function(t){return e.loginHandler(e.inputs)}}},[e._v("\n      Login\n    ")])],1)],1)},z=[];function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(n,!0).forEach(function(t){Object(p["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Y={name:"LoginView",data:function(){return{inputs:{username:"",password:""}}},computed:W({},Object(b["e"])("auth",["error"])),methods:W({loginHandler:function(e){var t=this,n=e.username,r=e.password;this.login({username:n,password:r}).then(function(){t.error||t.$router.push("/")})}},Object(b["b"])("auth",["login"]))},K=Y,J=n("0798"),X=n("2677"),Z=Object(y["a"])(K,R,z,!1,null,"686961c2",null),Q=Z.exports;S()(Z,{VAlert:J["a"],VBtn:_["a"],VTextField:X["a"]});var ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"lost-view"}},[n("h1",[e._v("Page Not Found")]),n("h4",[e._v("One of us is lost.")]),n("router-link",{attrs:{to:"/"}},[e._v("Take me home.")])],1)},te=[],ne={name:"lost"},re=ne,ae=Object(y["a"])(re,ee,te,!1,null,null,null),ie=ae.exports,se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{column:""}},[n("v-flex",{attrs:{"pb-2":""}},[n("h2",[e._v("\n      Labs\n    ")]),n("v-layout",{attrs:{"pt-2":"",row:"",wrap:""}},e._l(e.labs,function(t){return n("v-card",{key:t.id,staticClass:"ma-3",attrs:{color:"grey lighten-3",width:"300px"}},[t.image?n("v-img",{attrs:{src:t.image,"aspect-ratio":"2.5",width:"300px"}}):n("v-img",{attrs:{src:"/Laboratory.jpg","aspect-ratio":"2.5",width:"300px"}}),n("v-card-title",{attrs:{"primary-title":""}},[n("h3",{staticClass:"headline mb-0"},[e._v(e._s(t.title))])]),n("v-card-text",{staticClass:"text-xs-left"},[n("div",[e._v(e._s(t.description))])])],1)}),1)],1),n("v-divider"),n("v-flex",{attrs:{"py-2":""}},[n("h2",[e._v("\n      Researchers\n    ")]),n("v-layout",{attrs:{"pt-2":"",row:"",wrap:""}},e._l(e.users,function(t){return n("v-card",{key:t.id,staticClass:"ma-2",attrs:{hover:"",color:"grey lighten-2",to:"user/"+t.username}},[n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{"ma-2":"","xs-5":""}},[n("v-avatar",{attrs:{size:"100px"}},[t.image?n("v-img",{attrs:{src:t.image}}):n("v-img",{attrs:{src:"/user.png"}})],1)],1),n("v-flex",{attrs:{"xs-7":""}},[n("v-card-title",{attrs:{"primary-title":""}},[n("div",{staticClass:"text-xs-left"},[n("div",{staticClass:"title"},[e._v("\n                  "+e._s(e._f("formatResearcherName")(t))+"\n                ")]),n("div",{staticClass:"grey--text font-italic"},[e._v("\n                  "+e._s(t.institute)+"\n                ")])])])],1)],1)],1)}),1)],1)],1)},oe=[];function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(n,!0).forEach(function(t){Object(p["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ue={name:"HomeView",created:function(){this.fetchLabs(),this.fetchUsers({filters:{},pagination:{}})},computed:le({},Object(b["e"])("accounts",["labs","users"])),methods:le({},Object(b["b"])("accounts",["fetchLabs","fetchUsers"]))},de=ue,fe=n("b0af"),pe=n("99d9"),be=n("12b2"),me=n("ce7e"),ve=n("0e8f"),he=n("adda"),ge=Object(y["a"])(de,se,oe,!1,null,null,null),ye=ge.exports;S()(ge,{VAvatar:O["a"],VCard:fe["a"],VCardText:pe["b"],VCardTitle:be["a"],VDivider:me["a"],VFlex:ve["a"],VImg:he["a"],VLayout:T["a"]});var je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("user-information",{attrs:{username:e.username}})],1)},Se=[],xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{row:""}},[n("v-alert",{attrs:{value:!e.user,type:"error"}},[e._v("\n    No user found!\n  ")]),e.user?n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs10:""}},[n("v-layout",{staticClass:"text-xs-left",attrs:{column:""}},[n("v-flex",{staticClass:"title",attrs:{"pb-4":""}},[n("span",[e._v("\n            "+e._s(e._f("formatResearcherName")(e.user))+"\n          ")]),n("v-dialog",{attrs:{width:"400px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[e.editPermissions?n("v-icon",e._g({staticClass:"pl-2"},r),[e._v("\n                edit\n              ")]):e._e()]}}],null,!1,702671462),model:{value:e.editUserDialog,callback:function(t){e.editUserDialog=t},expression:"editUserDialog"}},[n("user-information-card")],1)],1),n("v-flex",[e._v(" Institute: "+e._s(e.user.institute)+" ")]),n("v-flex",[e._v(" Email: "+e._s(e.user.email)+" ")]),n("v-flex",[e._v(" Date of Birth: "+e._s(e._f("formatDate")(e.user.dateOfBirth))+" ")])],1)],1),n("v-flex",{attrs:{xs2:""}},[n("v-img",{attrs:{src:e.user.image,height:"240px",width:"240px"}})],1)],1):e._e()],1)},Oe=[],_e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-title",[e._v("\n    Edit User Information\n  ")]),n("v-card-text",[n("v-layout",{attrs:{wrap:"",column:""}},[n("v-form",{on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[n("v-text-field",{attrs:{label:"Username"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1)],1)],1),n("v-card-actions",[n("v-btn",{attrs:{color:"success"}},[e._v("\n      Update\n    ")]),n("v-btn",{attrs:{color:"error"}},[e._v("\n      Cancel\n    ")])],1)],1)},we=[],Pe={name:"UserInformationCard",data:function(){return{user:{id:null,username:null,email:null,title:null,firstName:null,lastName:null,dateOfBirth:null,institute:null,bio:null,image:null,isStaff:null}}}},De=Pe,ke=n("4bd4"),Te=Object(y["a"])(De,_e,we,!1,null,"49d732d6",null),Ce=Te.exports;function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(n,!0).forEach(function(t){Object(p["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}S()(Te,{VBtn:_["a"],VCard:fe["a"],VCardActions:pe["a"],VCardText:pe["b"],VCardTitle:be["a"],VForm:ke["a"],VLayout:T["a"],VTextField:X["a"]});var Ee={name:"UserInformation",components:{UserInformationCard:Ce},props:{username:String},data:function(){return{editUserDialog:!1}},computed:Ie({user:function(){return this.getUserByUsername(this.username)},editPermissions:function(){return!(!this.user||!this.currentUser)&&(this.currentUser.id===this.user.id||this.currentUserIsStaff)}},Object(b["c"])("accounts",["currentUser","currentUserIsStaff","getUserByUsername"])),methods:Ie({},Object(b["b"])("accounts",["fetchUsers"]))},$e=Ee,Be=n("169a"),Ue=Object(y["a"])($e,xe,Oe,!1,null,"f00783e0",null),Ne=Ue.exports;S()(Ue,{VAlert:J["a"],VDialog:Be["a"],VFlex:ve["a"],VIcon:k["a"],VImg:he["a"],VLayout:T["a"]});var qe={name:"User",props:{username:String},components:{UserInformation:Ne}},Ge=qe,Me=Object(y["a"])(Ge,je,Se,!1,null,"35ad5acc",null),Ae=Me.exports;S()(Me,{VContainer:w["a"]});var Le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{column:""}},[n("v-tabs",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[n("v-tab",{attrs:{ripple:""}},[e._v("\n      Studies\n    ")]),n("v-tab-item",[n("study-table")],1),n("v-tab",{attrs:{ripple:""}},[e._v("\n      Patients\n    ")]),n("v-tab-item",[n("patient-table")],1),n("v-tab",{attrs:{ripple:""}},[e._v("\n      Series\n    ")]),n("v-tab-item",[n("series-table")],1)],1)],1)},Fe=[],Re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{column:"","pb-5":""}},[n("patient-table-controls",{ref:"tableController",attrs:{pagination:e.pagination,studyId:e.studyId},on:{"fetch-patients-start":function(t){e.loading=!0},"fetch-patients-end":function(t){e.loading=!1}}}),n("v-data-table",{attrs:{"item-key":"id",expand:e.expand,headers:e.headers,items:e.patients,loading:e.loading,pagination:e.pagination,"rows-per-page-items":e.pagination.rowsPerPageItems,"total-items":e.patientCount},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[n("tr",{class:{selected:t.item.id===e.selectedPatientId},on:{click:function(n){return e.selectPatient(t)}}},[n("td",{staticClass:"text-xs-left",staticStyle:{width:"50px"}},[e._v("\n          "+e._s(t.item.id)+"\n        ")]),n("td",{staticClass:"text-xs-left"},[e._v("\n          "+e._s(t.item.uid)+"\n        ")]),n("td",{staticClass:"text-xs-left"},[e._v("\n          "+e._s(t.item.givenName)+"\n        ")]),n("td",{staticClass:"text-xs-left"},[e._v("\n          "+e._s(t.item.familyName)+"\n        ")]),n("td",{staticClass:"text-xs-left"},[e._v("\n          "+e._s(e.getPatientSex(t.item))+"\n        ")]),n("td",{staticClass:"text-xs-left"},[e._v("\n          "+e._s(e._f("formatDate")(t.item.dateOfBirth))+"\n        ")]),n("td",{staticClass:"text-xs-right"},[n("v-dialog",{attrs:{lazy:"",width:"400px"},scopedSlots:e._u([{key:"activator",fn:function(r){var a=r.on;return[e.patientToSubject[t.item.id]?n("v-btn",e._g({attrs:{small:"",color:"success"}},a),[e._v("\n                Subject #"+e._s(e.patientToSubject[t.item.id].id)+"\n              ")]):n("v-btn",e._g({attrs:{small:"",color:"warning",disabled:""}},a),[e._v("\n                Create\n              ")])]}}],null,!0),model:{value:e.subjectDialog[t.item.id],callback:function(n){e.$set(e.subjectDialog,t.item.id,n)},expression:"subjectDialog[props.item.id]"}},[n("subject-info-card",{key:e.subjectDialog[t.item.id],attrs:{existingSubject:e.patientToSubject[t.item.id]},on:{"close-subject-dialog":function(n){e.subjectDialog[t.item.id]=!1}}})],1)],1)])]}},{key:"expand",fn:function(e){return[n("v-flex",{staticClass:"embeded-table",attrs:{"px-2":"","py-2":""}},[n("series-table",{attrs:{patient:e.item}}),n("hr")],1)]}}])})],1)},ze=[],He=(n("c5f6"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{row:"","px-3":""}},[n("v-text-field",{staticStyle:{width:"2px"},attrs:{label:"ID"},model:{value:e.filters.id,callback:function(t){e.$set(e.filters,"id",t)},expression:"filters.id"}}),n("v-spacer"),n("v-text-field",{staticStyle:{width:"120px"},attrs:{label:"Patient UID",disabled:Boolean(e.filters.id)},model:{value:e.filters.uid,callback:function(t){e.$set(e.filters,"uid",t)},expression:"filters.uid"}}),n("v-spacer"),n("v-text-field",{staticStyle:{width:"120px"},attrs:{label:"First Name",disabled:Boolean(e.filters.id)},model:{value:e.filters.firstName,callback:function(t){e.$set(e.filters,"firstName",t)},expression:"filters.firstName"}}),n("v-spacer"),n("v-text-field",{staticStyle:{width:"120px"},attrs:{label:"Last Name",disabled:Boolean(e.filters.id)},model:{value:e.filters.lastName,callback:function(t){e.$set(e.filters,"lastName",t)},expression:"filters.lastName"}}),n("v-spacer"),n("v-select",{staticStyle:{width:"120px"},attrs:{clearable:"",label:"Sex",disabled:Boolean(e.filters.id),items:Object.keys(e.sexOptions)},model:{value:e.filters.sex,callback:function(t){e.$set(e.filters,"sex",t)},expression:"filters.sex"}}),n("v-spacer"),n("v-flex",[n("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-text-field",e._g({staticStyle:{width:"160px"},attrs:{clearable:"",readonly:"",label:"Born After","prepend-icon":"event",disabled:Boolean(e.filters.id)},model:{value:e.filters.bornAfter,callback:function(t){e.$set(e.filters,"bornAfter",t)},expression:"filters.bornAfter"}},r))]}}]),model:{value:e.bornAfterMenu,callback:function(t){e.bornAfterMenu=t},expression:"bornAfterMenu"}},[n("v-date-picker",{on:{input:function(t){e.bornAfterMenu=!1}},model:{value:e.filters.bornAfter,callback:function(t){e.$set(e.filters,"bornAfter",t)},expression:"filters.bornAfter"}})],1)],1),n("v-flex",[n("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-text-field",e._g({staticStyle:{width:"160px"},attrs:{clearable:"",readonly:"",label:"Born Before","prepend-icon":"event",disabled:Boolean(e.filters.id)},model:{value:e.filters.bornBefore,callback:function(t){e.$set(e.filters,"bornBefore",t)},expression:"filters.bornBefore"}},r))]}}]),model:{value:e.bornBeforeMenu,callback:function(t){e.bornBeforeMenu=t},expression:"bornBeforeMenu"}},[n("v-date-picker",{on:{input:function(t){e.bornBeforeMenu=!1}},model:{value:e.filters.bornBefore,callback:function(t){e.$set(e.filters,"bornBefore",t)},expression:"filters.bornBefore"}})],1)],1)],1)}),We=[],Ye=(n("6b54"),{Male:"M",Female:"F",Other:"O"}),Ke=function(e){return e.map(function(e){return parseFloat(e.toFixed(2))}).toString().replace(/,/g," x ").trim()};function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(n,!0).forEach(function(t){Object(p["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Ze={name:"PatientTableControls",props:{pagination:Object,studyId:Number},created:function(){this.studyId&&(this.filters.studyId=this.studyId),this.update()},data:function(){return{filters:{id:null,uid:null,firstName:null,lastName:null,sex:null,bornAfter:null,bornBefore:null,studyId:null},bornAfterMenu:!1,bornBeforeMenu:!1,sexOptions:Ye}},methods:Xe({update:function(){this.$emit("fetch-patients-start"),this.fetchPatients({filters:this.filters,pagination:this.pagination}),this.$emit("fetch-patients-end")}},Object(b["b"])("dicom",["fetchPatients"])),watch:{filters:{handler:function(){this.update()},deep:!0},pagination:{handler:function(){this.update()},deep:!0}}},Qe=Ze,et=n("2e4b"),tt=n("b56d"),nt=Object(y["a"])(Qe,He,We,!1,null,"f3485ba0",null),rt=nt.exports;S()(nt,{VDatePicker:et["a"],VFlex:ve["a"],VLayout:T["a"],VMenu:B["a"],VSelect:tt["a"],VSpacer:N["a"],VTextField:X["a"]});var at=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{column:"","pb-5":""}},[n("series-table-controls",{ref:"tableController",attrs:{pagination:e.pagination,patient:e.patient},on:{"fetch-series-start":function(t){e.loading=!0},"fetch-series-end":function(t){e.loading=!1}}}),n("v-data-table",{attrs:{"item-key":"id",headers:e.headers,items:e.seriesList,loading:e.loading,pagination:e.pagination,"rows-per-page-items":e.pagination.rowsPerPageItems,"total-items":e.seriesCount},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[n("tr",[n("td",{staticClass:"text-xs-left",staticStyle:{width:"50px"}},[e._v("\n          "+e._s(t.item.number)+"\n        ")]),n("td",{staticClass:"text-xs-left"},[e._v("\n          "+e._s(t.item.description)+"\n        ")]),n("td",{staticClass:"text-xs-left"},[e._v("\n          "+e._s(e._f("formatDate")(t.item.date.slice(0,10)))+"\n        ")]),n("td",{staticClass:"text-xs-left"},[e._v("\n          "+e._s(t.item.time.slice(0,8))+"\n        ")]),n("td",{staticClass:"text-xs-center"},[n("v-dialog",{attrs:{lazy:"",width:"800px"},scopedSlots:e._u([{key:"activator",fn:function(r){var a=r.on;return[n("v-btn",e._g({staticClass:"info",attrs:{small:""}},a),[e._v("\n                "+e._s(e.getSequenceTypeTitle(t.item))+"\n              ")])]}}],null,!0),model:{value:e.protocolInformationDialog[t.item.id],callback:function(n){e.$set(e.protocolInformationDialog,t.item.id,n)},expression:"protocolInformationDialog[props.item.id]"}},[n("protocol-information",{attrs:{series:t.item}})],1)],1),n("td",{staticClass:"text-xs-center"},[e._v("\n          "+e._s(e.getSpatialResolution(t.item))+"\n        ")]),n("td",{staticClass:"text-xs-left"},[e.getScanByDicomSeries(t.item)?n("v-dialog",{attrs:{lazy:"",width:"800px"},scopedSlots:e._u([{key:"activator",fn:function(r){var a=r.on;return[n("v-btn",e._g({attrs:{small:"",color:"success"}},a),[e._v("\n                "+e._s("Scan #"+e.getScanByDicomSeries(t.item).id)+"\n              ")])]}}],null,!0),model:{value:e.scanInfoDialog[t.item.id],callback:function(n){e.$set(e.scanInfoDialog,t.item.id,n)},expression:"scanInfoDialog[props.item.id]"}},[n("scan-info",{attrs:{existingScan:e.getScanByDicomSeries(t.item),dicom:t.item},on:{"close-scan-dialog":function(n){e.scanInfoDialog[t.item.id]=!1}}})],1):e._e()],1)])]}}]),model:{value:e.selectedSeries,callback:function(t){e.selectedSeries=t},expression:"selectedSeries"}})],1)},it=[],st=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n    "+e._s(e.sequenceType.title)+" Protocol Information\n  ")]),n("v-card-text",[n("v-layout",{staticClass:"text-left",attrs:{column:""}},[e.sequenceType.description?n("v-flex",[n("div",{staticClass:"grey--text text--darken-2 font-italic"},[e._v("\n          "+e._s(e.sequenceType.description)+"\n        ")]),n("v-divider")],1):e._e(),n("v-layout",{attrs:{row:"",wrap:""}},[n("v-layout",{attrs:{column:""}},[n("v-subheader",[e._v("\n            Scanning Sequence\n          ")]),n("v-flex",{staticClass:"pl-3"},e._l(e.sequenceType.scanningSequence,function(t,r){return n("div",{key:r,staticClass:"text-xs-left"},[n("v-chip",{attrs:{small:""}},[n("v-avatar",{attrs:{color:e.getScanningSequenceColor(t)}},[e._v(e._s(t))]),e._v("\n                "+e._s(e.getScanningSequenceName(t))+"\n              ")],1)],1)}),0)],1),n("v-layout",{attrs:{column:""}},[n("v-subheader",[e._v("\n            Sequence Variant\n          ")]),n("v-flex",{staticClass:"pl-3"},e._l(e.sequenceType.sequenceVariant,function(t,r){return n("div",{key:r,staticClass:"text-xs-left"},[n("v-chip",{attrs:{small:""}},[n("v-avatar",{attrs:{color:e.getSequenceVariantColor(t)}},[e._v(e._s(t))]),e._v("\n                "+e._s(e.getSequenceVariantName(t))+"\n              ")],1)],1)}),0)],1),n("v-layout",{attrs:{column:""}},[n("v-subheader",[e._v("\n            Acquisition Parameters\n          ")]),n("v-flex",{staticClass:"pl-3"},e._l(e.getSeriesParameters(e.series||e.scan),function(t,r){return n("div",{key:r,staticClass:"text-xs-left"},[t?n("v-chip",{attrs:{small:""}},[n("v-avatar",{attrs:{color:e.getSeriesParameterColor(r)}},[n("span","repetitionTime"==r?{staticClass:"white--text"}:{staticClass:"black--text"},[e._v("\n                    "+e._s(e.getSeriesParameterName(r)))])]),e._v("\n                "+e._s(t.toLocaleString())+"\n              ")],1):e._e()],1)}),0)],1)],1)],1)],1)],1)},ot=[];n("7f7f");function ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ct(n,!0).forEach(function(t){Object(p["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ct(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ut={name:"ProtocolInformation",props:{series:Object,scan:Object},created:function(){this.series?this.sequenceType=this.getDicomSeriesSequenceType(this.series):this.scan&&(this.sequenceType=this.getSequenceTypeByUrl(this.scan.sequenceType))},computed:lt({},Object(b["c"])("mri",["getSequenceTypeByUrl"]),{},Object(b["c"])("mri",["getDicomSeriesSequenceType"])),data:function(){return{sequenceType:null,headers:[{text:"Scanning Sequence",align:"left",sortable:!1,value:"scanningSequence"},{text:"Sequence Variant",align:"left",sortable:!1,value:"sequenceVariant"},{text:"Scan Parameters (ms)",align:"left",sortable:!1,value:"scanParameters"}]}},methods:{getScanningSequenceName:function(e){return dt[e].name},getScanningSequenceColor:function(e){return dt[e].color},getSequenceVariantName:function(e){return ft[e].name},getSequenceVariantColor:function(e){return ft[e].color},getSpatialResolution:function(e){var t=e.pixelSpacing.concat(e.sliceThickness);return t.map(function(e){return parseFloat(e.toFixed(2))}).toString().replace(/,/g," , ").trim()},getSeriesParameters:function(e){var t=e.repetitionTime,n=e.echoTime,r=e.inversionTime;return{repetitionTime:t,echoTime:n,inversionTime:r}},getSeriesParameterName:function(e){return pt[e].name},getSeriesParameterColor:function(e){return pt[e].color}}},dt={GR:{name:"Gradient Recalled",color:"amber accent-4"},SE:{name:"Spin Echo",color:"pink accent-4"},IR:{name:"Inversion Recovery",color:"green accent-4"},EP:{name:"Echo Planar",color:"cyan accent-4"},RM:{name:"Research Mode",color:"grey darken-1"}},ft={SK:{name:"Segmented k-Space",color:"deep-purple lighten-3"},MTC:{name:"Magnetization Transfer Contrast",color:"light-blue lighten-3"},SS:{name:"Steady State",color:"teal lighten-3"},TRSS:{name:"Time Reversed Steady State",color:"light-green lighten-3"},SP:{name:"Spoiled",color:"lime lighten-3"},MP:{name:"MAG Prepared",color:"brown lighten-3"},OSP:{name:"Oversampling Phase",color:"blue-grey lighten-3"},NONE:{name:"None",color:"grey lighten-2"}},pt={repetitionTime:{name:"TR",color:"black"},echoTime:{name:"TE",color:"white"},inversionTime:{name:"TI",color:"transparent"}},bt=ut,mt=n("cc20"),vt=n("e0c7"),ht=Object(y["a"])(bt,st,ot,!1,null,"d832e866",null),gt=ht.exports;S()(ht,{VAvatar:O["a"],VCard:fe["a"],VCardText:pe["b"],VCardTitle:be["a"],VChip:mt["a"],VDivider:me["a"],VFlex:ve["a"],VLayout:T["a"],VSubheader:vt["a"]});var yt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{row:"","px-3":""}},[n("v-text-field",{staticStyle:{width:"10px"},attrs:{label:"Number"},model:{value:e.filters.number,callback:function(t){e.$set(e.filters,"number",t)},expression:"filters.number"}}),n("v-spacer"),n("v-text-field",{staticStyle:{width:"120px"},attrs:{label:"Description"},model:{value:e.filters.description,callback:function(t){e.$set(e.filters,"description",t)},expression:"filters.description"}}),n("v-spacer"),n("v-menu",{attrs:{"close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-text-field",e._g({staticStyle:{width:"120px"},attrs:{clearable:"",readonly:"",label:"After Date","prepend-icon":"event"},model:{value:e.filters.afterDate,callback:function(t){e.$set(e.filters,"afterDate",t)},expression:"filters.afterDate"}},r))]}}]),model:{value:e.afterDateMenu,callback:function(t){e.afterDateMenu=t},expression:"afterDateMenu"}},[n("v-date-picker",{on:{input:function(t){e.afterDateMenu=!1}},model:{value:e.filters.afterDate,callback:function(t){e.$set(e.filters,"afterDate",t)},expression:"filters.afterDate"}})],1),n("v-spacer"),n("v-menu",{attrs:{"close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-text-field",e._g({staticStyle:{width:"120px"},attrs:{clearable:"",readonly:"",label:"Before Date","prepend-icon":"event"},model:{value:e.filters.beforeDate,callback:function(t){e.$set(e.filters,"beforeDate",t)},expression:"filters.beforeDate"}},r))]}}]),model:{value:e.beforeDateMenu,callback:function(t){e.beforeDateMenu=t},expression:"beforeDateMenu"}},[n("v-date-picker",{on:{input:function(t){e.beforeDateMenu=!1}},model:{value:e.filters.beforeDate,callback:function(t){e.$set(e.filters,"beforeDate",t)},expression:"filters.beforeDate"}})],1),n("v-spacer"),n("v-menu",{attrs:{"close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-text-field",e._g({staticStyle:{width:"120px"},attrs:{clearable:"",readonly:"",label:"After Time","prepend-icon":"access_time"},model:{value:e.filters.afterTime,callback:function(t){e.$set(e.filters,"afterTime",t)},expression:"filters.afterTime"}},r))]}}]),model:{value:e.afterTimeMenu,callback:function(t){e.afterTimeMenu=t},expression:"afterTimeMenu"}},[n("v-time-picker",{attrs:{format:"24hr"},on:{input:function(t){e.afterTimeMenu=!1}},model:{value:e.filters.afterTime,callback:function(t){e.$set(e.filters,"afterTime",t)},expression:"filters.afterTime"}})],1),n("v-spacer"),n("v-menu",{attrs:{"close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-text-field",e._g({staticStyle:{width:"120px"},attrs:{clearable:"",readonly:"",label:"Before Time","prepend-icon":"access_time"},model:{value:e.filters.beforeTime,callback:function(t){e.$set(e.filters,"beforeTime",t)},expression:"filters.beforeTime"}},r))]}}]),model:{value:e.beforeTimeMenu,callback:function(t){e.beforeTimeMenu=t},expression:"beforeTimeMenu"}},[n("v-time-picker",{attrs:{format:"24hr"},on:{input:function(t){e.beforeTimeMenu=!1}},model:{value:e.filters.beforeTime,callback:function(t){e.$set(e.filters,"beforeTime",t)},expression:"filters.beforeTime"}})],1)],1)},jt=[],St=(n("5df3"),n("4f7f"),n("75fc"));function xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xt(n,!0).forEach(function(t){Object(p["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var _t={name:"SeriesTableControls",props:{pagination:Object,patient:Object},created:function(){this.fetchSequenceTypes(),this.patient&&(this.filters.patientId=this.patient.id),this.update()},data:function(){return{filters:{id:null,uid:null,number:null,description:null,afterDate:null,beforeDate:null,afterTime:null,beforeTime:null,patientId:null},afterDateMenu:!1,beforeDateMenu:!1,afterTimeMenu:!1,beforeTimeMenu:!1}},computed:Ot({dates:function(){var e=this,t=Object(St["a"])(new Set(this.seriesList.map(function(e){return e.date})));return t.map(function(t){return e.$options.filters.formatDate(t)})}},Object(b["e"])("dicom",["seriesList"])),methods:Ot({update:function(){var e=this;this.$emit("fetch-series-start"),this.fetchSeries({filters:this.filters,pagination:this.pagination}).then(function(){return e.fetchScans({filters:{dicomIdIn:e.seriesList.map(function(e){return e.id})},pagination:e.pagination})}),this.$emit("fetch-series-end")}},Object(b["b"])("dicom",["fetchSeries"]),{},Object(b["b"])("mri",["fetchSequenceTypes","fetchScans"])),watch:{filters:{handler:function(){this.update()},deep:!0},pagination:{handler:function(){this.update()},deep:!0}}},wt=_t,Pt=n("c964"),Dt=Object(y["a"])(wt,yt,jt,!1,null,"78b12a72",null),kt=Dt.exports;S()(Dt,{VDatePicker:et["a"],VLayout:T["a"],VMenu:B["a"],VSpacer:N["a"],VTextField:X["a"],VTimePicker:Pt["a"]});var Tt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-title",{staticClass:"green darken-3"},[n("div",{staticClass:"headline"},[n("span",{staticClass:"white--text"},[e._v("\n        Scan Information\n      ")]),e.existingScan?n("span",{staticClass:"grey--text text--lighten-1"},[e._v("\n        "+e._s("#"+e.scan.id)+"\n      ")]):e._e()])]),n("v-card-text",[n("v-container",{attrs:{"p-3":""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-text-field",{attrs:{id:"institution-name-input",type:"text",label:"Institution Name",hint:"Where was this scan acquired?",readonly:!e.editable},model:{value:e.scan.institutionName,callback:function(t){e.$set(e.scan,"institutionName",t)},expression:"scan.institutionName"}})],1),n("v-layout",{attrs:{row:"",wrap:""}},[n("v-text-field",{attrs:{id:"number-input",type:"number",label:"Acquisition Number",hint:"A number identifying this scan within its acquisition session.",readonly:!e.editable},model:{value:e.scan.number,callback:function(t){e.$set(e.scan,"number",t)},expression:"scan.number"}}),n("v-spacer"),n("v-text-field",{attrs:{id:"description-input",type:"text",label:"Description",hint:"A description of the type of scan acquired.",readonly:!e.editable},model:{value:e.scan.description,callback:function(t){e.$set(e.scan,"description",t)},expression:"scan.description"}}),n("v-spacer"),n("v-select",{attrs:{label:"Sequence Type",hint:"A unique combination of scanning sequence and variant.",items:e.sequenceTypes.map(function(e){return e.title}),readonly:!e.editable},model:{value:e.sequenceType,callback:function(t){e.sequenceType=t},expression:"sequenceType"}})],1),n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",[n("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-text-field",e._g({attrs:{label:"Acquisition Date","prepend-icon":"event",readonly:""},model:{value:e.scanDate,callback:function(t){e.scanDate=t},expression:"scanDate"}},r))]}}]),model:{value:e.dateMenu,callback:function(t){e.dateMenu=t},expression:"dateMenu"}},[n("v-date-picker",{attrs:{max:(new Date).toISOString().substr(0,10),readonly:!e.editable},on:{input:function(t){e.dateMenu=!1}},model:{value:e.scanDate,callback:function(t){e.scanDate=t},expression:"scanDate"}})],1)],1),n("v-spacer"),n("v-flex",{attrs:{"pl-3":""}},[n("v-menu",{ref:"timeMenuRef",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":e.scanTime,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(t){e.scanTime=t},"update:return-value":function(t){e.scanTime=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-text-field",e._g({attrs:{label:"Acquisition Time","prepend-icon":"access_time",readonly:""},model:{value:e.scanTime,callback:function(t){e.scanTime=t},expression:"scanTime"}},r))]}}]),model:{value:e.timeMenu,callback:function(t){e.timeMenu=t},expression:"timeMenu"}},[e.timeMenu?n("v-time-picker",{attrs:{format:"24hr","use-seconds":"","full-width":"",readonly:!e.editable},on:{"click:minute":function(t){return e.$refs.timeMenuRef.save(e.time)}},model:{value:e.scanTime,callback:function(t){e.scanTime=t},expression:"scanTime"}}):e._e()],1)],1)],1),n("v-layout",{attrs:{row:"",wrap:""}},[n("v-textarea",{attrs:{name:"comments-input",label:"Comments",hint:"Anything noteworty about this scan or its acquisition.",readonly:!e.editable},model:{value:e.scan.comments,callback:function(t){e.$set(e.scan,"comments",t)},expression:"scan.comments"}})],1)],1)],1),n("v-card-actions",[n("v-flex",{attrs:{shrink:"","px-3":""}},[e.existingScan?n("v-switch",{attrs:{label:e.editable?"Edit Mode":"View Mode"},model:{value:e.editable,callback:function(t){e.editable=t},expression:"editable"}}):e._e()],1),e.existingScan&&e.editable?n("v-btn",{attrs:{flat:"",color:"error"},on:{click:e.deleteExistingScan}},[e._v("\n      Delete\n    ")]):e._e(),n("v-spacer"),e.editable&&e.existingScan?n("v-btn",{attrs:{flat:"",color:"warning"},on:{click:function(t){return e.updateExistingScan(e.scan)}}},[e._v("\n      Update\n    ")]):e._e(),e.existingScan||"new"!=e.radioGroup?e._e():n("v-btn",{attrs:{flat:"",color:"success"},on:{click:e.createNewScan}},[e._v("\n      Create\n    ")]),n("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:e.closeDialog}},[e._v("\n      Cancel\n    ")])],1)],1)},Ct=[];function Vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function It(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vt(n,!0).forEach(function(t){Object(p["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Et={institutionName:"",description:"",sequenceType:null,number:null,comments:null,subject:null},$t={name:"ScanInfo",props:{existingScan:Object,dicom:Object},created:function(){this.initializeScan(),this.dicom&&this.fetchPatients()},data:function(){return{radioGroup:"new",dateMenu:null,timeMenu:null,scan:Object.assign({},Et),editable:!1}},computed:It({scanDate:function(){var e=this.scan.time;return e?new Date(e).toISOString().substr(0,10):null},scanTime:function(){var e=this.scan.time;return e?new Date(e).toISOString().substr(11):null},sequenceType:function(){var e=this.getSequenceTypeByUrl(this.scan.sequenceType);return e?e.title:null}},Object(b["e"])("mri",["sequenceTypes"]),{},Object(b["c"])("mri",["getSequenceTypeByUrl"])),methods:It({closeDialog:function(){this.existingScan&&this.editable&&(this.editable=!1),this.$emit("close-scan-dialog")},updateScanFromDicomInfo:function(e){this.scan=e,delete this.scan.studyGroups,delete this.scan.id,delete this.scan.nifti,delete this.scan.url,this.scan.dicom=this.dicom.url},createNewScan:function(){var e=this;this.createScan(this.scan).then(function(){e.editable=!1})},updateExistingScan:function(){var e=this;this.updateScan(this.scan).then(function(){e.editable=!1,e.closeDialog()})},deleteExistingScan:function(){var e=this;this.deleteScan(this.scan).then(function(){e.initializeScan(),e.closeDialog()})},initializeScan:function(){var e=this;this.existingScan?(this.scan=Object.assign({},this.existingScan),this.editable=!1):this.dicom?(this.getOrCreateScanInfoFromDicomSeries(this.dicom).then(function(t){e.updateScanFromDicomInfo(t)}),this.editable=!0):(this.scan=Object.assign({},Et),this.editable=!0)}},Object(b["b"])("mri",["getOrCreateScanInfoFromDicomSeries","createScan","updateScan","deleteScan"]),{},Object(b["b"])("dicom",["fetchPatients"])),watch:{editable:function(e){e||(this.scan=Object.assign({},this.existingScan))}}},Bt=$t,Ut=(n("f58a"),n("b73d")),Nt=n("a844"),qt=Object(y["a"])(Bt,Tt,Ct,!1,null,"7e406d90",null),Gt=qt.exports;function Mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function At(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mt(n,!0).forEach(function(t){Object(p["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}S()(qt,{VBtn:_["a"],VCard:fe["a"],VCardActions:pe["a"],VCardText:pe["b"],VCardTitle:be["a"],VContainer:w["a"],VDatePicker:et["a"],VFlex:ve["a"],VLayout:T["a"],VMenu:B["a"],VSelect:tt["a"],VSpacer:N["a"],VSwitch:Ut["a"],VTextField:X["a"],VTextarea:Nt["a"],VTimePicker:Pt["a"]});var Lt={name:"SeriesTable",props:{patient:Object},components:{ProtocolInformation:gt,ScanInfo:Gt,SeriesTableControls:kt},data:function(){return{protocolInformationDialog:{},scanInfoDialog:{},studyGroups:{},selectedSeries:[],headers:[{text:"Number",value:"number",width:"20px"},{text:"Description",value:"description",width:"400px",sortable:!1},{text:"Date",value:"date",width:"100px"},{text:"Time",value:"time",width:"100px"},{text:"Sequence Type",value:"sequenceType",width:"200px",sortable:!1,align:"center"},{text:"Spatial Resolution (mm)",value:"spatialResolution",sortable:!1,align:"center",width:"100px"},{text:"Scan Instance",value:"scanInstance",sortable:!1,width:"50px"}],pagination:{rowsPerPage:10,page:1,sortBy:"number",descending:!1,rowsPerPageItems:[10,25,50,{text:"$vuetify.dataIterator.rowsPerPageAll",value:1e5}]},loading:!1}},computed:At({},Object(b["e"])("dicom",["seriesList","seriesCount"]),{},Object(b["e"])("mri",["sequenceTypes"]),{},Object(b["c"])("mri",["getDicomSeriesSequenceType","getScanByDicomSeries"])),methods:{getSequenceTypeTitle:function(e){var t=this.getDicomSeriesSequenceType(e);return t?t.title:"Undefined"},getSpatialResolution:function(e){var t=e.pixelSpacing.concat(e.sliceThickness);return Ke(t)},stringifyGroup:function(e){return"".concat(e.study.title," | ").concat(e.title)}}},Ft=Lt,Rt=n("8fea"),zt=Object(y["a"])(Ft,at,it,!1,null,"1c863b56",null),Ht=zt.exports;S()(zt,{VBtn:_["a"],VDataTable:Rt["a"],VDialog:Be["a"],VLayout:T["a"]});var Wt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-title",{staticClass:"green darken-3"},[n("div",{staticClass:"headline"},[n("span",{staticClass:"white--text"},[e._v("\n        Subject Information\n      ")]),e.existingSubject?n("span",{staticClass:"grey--text text--lighten-1"},[e._v("\n        "+e._s("#"+e.subject.id)+"\n      ")]):e._e()]),n("v-spacer"),e.editable&&e.currentUserIsStaff?n("v-icon",{staticStyle:{cursor:"pointer"},on:{dblclick:function(t){return e.deleteSubject(e.existingSubject)}}},[e._v("\n      delete\n    ")]):e._e()],1),n("v-card-text",[n("v-layout",{attrs:{column:""}},[n("v-form",{on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[n("v-text-field",{attrs:{label:"First Name",counter:64,disabled:!(e.editable||e.subject.firstName),readonly:!e.editable},model:{value:e.subject.firstName,callback:function(t){e.$set(e.subject,"firstName",t)},expression:"subject.firstName"}}),n("v-text-field",{attrs:{label:"Last Name",counter:64,disabled:!(e.editable||e.subject.lastName),readonly:!e.editable},model:{value:e.subject.lastName,callback:function(t){e.$set(e.subject,"lastName",t)},expression:"subject.lastName"}}),n("v-select",{attrs:{label:"Dominant Hand",items:Object.keys(e.dominantHandOptions),readonly:!e.editable,disabled:!(e.editable||e.subjectDominantHand)},model:{value:e.subjectDominantHand,callback:function(t){e.subjectDominantHand=t},expression:"subjectDominantHand"}}),n("v-select",{attrs:{label:"Sex",disabled:!(e.editable||e.subjectSex),items:Object.keys(e.sexOptions),readonly:!e.editable},model:{value:e.subjectSex,callback:function(t){e.subjectSex=t},expression:"subjectSex"}}),n("v-select",{attrs:{label:"Gender",disabled:!(e.editable||e.subjectGender),items:Object.keys(e.genderOptions),readonly:!e.editable},model:{value:e.subjectGender,callback:function(t){e.subjectGender=t},expression:"subjectGender"}}),n("v-menu",{attrs:{lazy:"","min-width":"290px","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-text-field",e._g({attrs:{label:"Date of Birth","prepend-icon":"cake",disabled:!(e.editable||e.formattedDate),readonly:!e.editable},model:{value:e.formattedDate,callback:function(t){e.formattedDate=t},expression:"formattedDate"}},r))]}}]),model:{value:e.dob_menu,callback:function(t){e.dob_menu=t},expression:"dob_menu"}},[n("v-date-picker",{on:{input:function(t){e.dob_menu=!1}},model:{value:e.subject.dateOfBirth,callback:function(t){e.$set(e.subject,"dateOfBirth",t)},expression:"subject.dateOfBirth"}})],1)],1)],1)],1),n("v-card-actions",[e.currentUserIsStaff?n("v-flex",{attrs:{"px-3":""}},[e.existingSubject?n("v-switch",{attrs:{label:e.editable?"Edit Mode":"View Mode"},model:{value:e.editable,callback:function(t){e.editable=t},expression:"editable"}}):e._e()],1):e._e(),n("v-spacer"),e.editable&&e.existingSubject?n("v-btn",{attrs:{color:"warning",flat:"",disabled:!e.currentUserIsStaff},on:{click:function(t){return e.updateExistingSubject()}}},[e._v("\n      Update\n    ")]):e._e(),!e.existingSubject&&e.currentUserIsStaff?n("v-btn",{attrs:{color:"success",flat:""},on:{click:e.createNewSubject}},[e._v("\n      Create\n    ")]):e._e(),n("v-btn",{attrs:{color:"error",flat:""},on:{click:e.closeDialog}},[e._v("\n      Cancel\n    ")])],1)],1)},Yt=[],Kt=(n("28a5"),n("768b")),Jt={Male:"M",Female:"F",Other:"U"},Xt={Cisgender:"CIS",Transgender:"TRANS",Other:"OTHER"},Zt={Right:"R",Left:"L",Ambidextrous:"A"};function Qt(e,t){return Object.keys(e).find(function(n){return e[n]===t})}function en(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?en(n,!0).forEach(function(t){Object(p["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):en(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var nn={idNumber:"",firstName:"",lastName:"",dateOfBirth:null,dominantHand:null,sex:null,gender:null},rn={name:"SubjectInfoCard",props:{existingSubject:Object,createMode:{type:Boolean,default:!1}},created:function(){this.existingSubject&&(this.subject=Object.assign({},this.existingSubject),this.editable=!1)},data:function(){return{selectedSubjectRepresentation:"",subject:Object.assign({},nn),editable:!0,dob_menu:!1,radioGroup:"new",sexOptions:Jt,genderOptions:Xt,dominantHandOptions:Zt}},computed:tn({subjectSex:{get:function(){return Qt(this.sexOptions,this.subject.sex)},set:function(e){this.subject.sex=this.sexOptions[e]}},subjectGender:{get:function(){return Qt(this.genderOptions,this.subject.gender)},set:function(e){this.subject.gender=this.genderOptions[e]}},subjectDominantHand:{get:function(){return Qt(this.dominantHandOptions,this.subject.dominantHand)},set:function(e){this.subject.dominantHand=this.dominantHandOptions[e]}},formattedDate:function(){return an(this.subject.dateOfBirth)}},Object(b["e"])("research",["subjects"]),{},Object(b["c"])("accounts",["currentUserIsStaff"])),methods:tn({closeDialog:function(){this.existingSubject&&this.editable&&(this.editable=!1),this.$emit("close-subject-dialog")},updateExistingSubject:function(){var e=this;this.updateSubject(this.subject).then(function(t){return e.subject=Object.assign({},t)}).then(this.closeDialog())},createNewSubject:function(){this.createSubject(this.subject).then(this.editable=!1).then(this.closeDialog())},getSubjectRepresentation:function(e){var t="Subject #".concat(e.id);return e.firstName&&e.lastName&&(t=t.concat(" [".concat(e.firstName," ").concat(e.lastName,"]"))),t}},Object(b["b"])("research",["createSubject","updateSubject","deleteSubject"])),watch:{editable:function(e){e||(this.subject=Object.assign({},this.existingSubject))}}};function an(e){if(!e)return null;var t=e.split("-"),n=Object(Kt["a"])(t,3),r=n[0],a=n[1],i=n[2];return"".concat(i,"/").concat(a,"/").concat(r)}var sn=rn,on=(n("82e6"),Object(y["a"])(sn,Wt,Yt,!1,null,"e6b1562c",null)),cn=on.exports;function ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function un(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ln(n,!0).forEach(function(t){Object(p["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ln(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}S()(on,{VBtn:_["a"],VCard:fe["a"],VCardActions:pe["a"],VCardText:pe["b"],VCardTitle:be["a"],VDatePicker:et["a"],VFlex:ve["a"],VForm:ke["a"],VIcon:k["a"],VLayout:T["a"],VMenu:B["a"],VSelect:tt["a"],VSpacer:N["a"],VSwitch:Ut["a"],VTextField:X["a"]});var dn={name:"PatientTable",components:{PatientTableControls:rt,SeriesTable:Ht,SubjectInfoCard:cn},props:{studyId:Number},data:function(){return{subjectDialog:{},patientToSubject:{},expand:!1,headers:[{text:"ID",value:"id",align:"left"},{text:"Patient UID",value:"uid"},{text:"First Name",value:"givenName"},{text:"Last Name",value:"familyName"},{text:"Sex",value:"sex"},{text:"Date of Birth",value:"dateOfBirth",sortable:!1},{text:"Research Subject",value:"subject",width:"50px",sortable:!1}],pagination:{rowsPerPage:25,page:1,sortBy:"number",descending:!1,rowsPerPageItems:[10,25,50,{text:"$vuetify.dataIterator.rowsPerPageAll",value:1e5}]},loading:!1,sexOptions:Ye}},computed:un({},Object(b["e"])("dicom",["patients","patientCount","selectedPatientId"])),methods:un({getPatientSex:function(e){return c(this.sexOptions,e.sex)},selectPatient:function(e){e.expanded=!e.expanded,e.expanded?this.setSelectedPatientId(e.item.id):this.setSelectedPatientId(null)}},Object(b["d"])("dicom",["setSelectedPatientId"]),{},Object(b["b"])("research",["fetchSubjects"])),watch:{patients:function(e){var t=this;e.forEach(function(e){t.fetchSubjects({filters:{dicomPatientId:e.id},pagination:{}}).then(function(n){return t.$set(t.patientToSubject,e.id,n[0])})})}}},fn=dn,pn=(n("c333"),Object(y["a"])(fn,Re,ze,!1,null,"fc0ff5c6",null)),bn=pn.exports;S()(pn,{VBtn:_["a"],VDataTable:Rt["a"],VDialog:Be["a"],VFlex:ve["a"],VLayout:T["a"]});var mn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{column:""}},[n("study-table-controls",{ref:"tableController",attrs:{pagination:e.pagination},on:{"fetch-studies-start":function(t){e.loading=!0},"fetch-studies-end":function(t){e.loading=!1}}}),n("v-data-table",{attrs:{"item-key":"id",expand:e.expand,headers:e.headers,items:e.studies,loading:e.loading,pagination:e.pagination,"rows-per-page-items":e.pagination.rowsPerPageItems,"total-items":e.studyCount},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[n("tr",{class:{selected:t.item.id===e.selectedStudyId},on:{click:function(n){return e.selectStudy(t)}}},[n("td",{staticClass:"text-xs-left",staticStyle:{width:"50px"}},[e._v("\n          "+e._s(t.item.id)+"\n        ")]),n("td",{staticClass:"text-xs-left"},[e._v("\n          "+e._s(t.item.description)+"\n        ")]),n("td",{staticClass:"text-xs-left"},[e._v("\n          "+e._s(e._f("formatDate")(t.item.date))+"\n        ")]),n("td",{staticClass:"text-xs-left"},[e._v("\n          "+e._s(t.item.time)+"\n        ")]),n("td",{staticClass:"text-xs-left"},[e._v("\n          "+e._s(t.item.uid)+"\n        ")])])]}},{key:"expand",fn:function(t){return[n("v-flex",{staticClass:"embeded-table",attrs:{"px-2":"","py-2":""}},[n("patient-table",{attrs:{studyId:e.selectedStudyId}}),n("hr")],1)]}}])})],1)},vn=[],hn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},gn=[];function yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yn(n,!0).forEach(function(t){Object(p["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Sn={name:"StudyTableControls",props:{pagination:Object},created:function(){this.update()},data:function(){return{filters:{id:null,description:null,beforeDate:null,afterDate:null,beforeTime:null,afterTime:null,uid:null}}},methods:jn({update:function(){this.$emit("fetch-studies-start"),this.fetchStudies({filters:this.filters,pagination:this.pagination}),this.$emit("fetch-studies-end")}},Object(b["b"])("dicom",["fetchStudies"])),watch:{filters:{handler:function(){this.update()},deep:!0},pagination:{handler:function(){this.update()},deep:!0}}},xn=Sn,On=Object(y["a"])(xn,hn,gn,!1,null,"5971a697",null),_n=On.exports;function wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Pn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wn(n,!0).forEach(function(t){Object(p["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Dn={name:"StudyTable",components:{PatientTable:bn,StudyTableControls:_n},data:function(){return{expand:!1,headers:[{text:"ID",value:"id",align:"left"},{text:"Description",value:"description"},{text:"Date",value:"date"},{text:"Time",value:"time"},{text:"UID",value:"uid"}],pagination:{rowsPerPage:25,page:1,sortBy:"id",descending:!1,rowsPerPageItems:[10,25,50,{text:"$vuetify.dataIterator.rowsPerPageAll",value:1e5}]},loading:!1}},computed:Pn({},Object(b["e"])("dicom",["studies","studyCount","selectedStudyId"])),methods:Pn({selectStudy:function(e){e.expanded=!e.expanded,e.expanded?this.setSelectedStudyId(e.item.id):this.setSelectedStudyId(null)}},Object(b["d"])("dicom",["setSelectedStudyId"]))},kn=Dn,Tn=(n("093f"),Object(y["a"])(kn,mn,vn,!1,null,"937a7694",null)),Cn=Tn.exports;function Vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function In(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vn(n,!0).forEach(function(t){Object(p["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}S()(Tn,{VDataTable:Rt["a"],VFlex:ve["a"],VLayout:T["a"]});var En={name:"DicomBrowser",components:{PatientTable:bn,SeriesTable:Ht,StudyTable:Cn},data:function(){return{active:null}},methods:In({next:function(){var e=parseInt(this.active);this.active=e<2?e+1:0}},Object(b["d"])("dicom",["setSelectedPatientId","setSelectedStudyId"]),{},Object(b["b"])("dicom",["fetchPatients","fetchStudies","fetchSeries"])),watch:{active:function(e){0===e?(this.setSelectedStudyId(null),this.fetchStudies({filters:{},pagination:{}})):1===e?(this.setSelectedPatientId(null),this.fetchPatients({filters:{},pagination:{}})):2===e&&this.fetchSeries({filters:{},pagination:{}})}}},$n=En,Bn=n("71a3"),Un=n("c671"),Nn=n("fe57"),qn=Object(y["a"])($n,Le,Fe,!1,null,"21c6dd5d",null),Gn=qn.exports;S()(qn,{VLayout:T["a"],VTab:Bn["a"],VTabItem:Un["a"],VTabs:Nn["a"]});var Mn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{column:""}},[e.currentUserIsStaff?n("v-layout",{attrs:{"mx-0":"",row:""}},[n("v-spacer"),n("v-dialog",{attrs:{width:"400px",lazy:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-btn",e._g({staticClass:"info"},r),[e._v("\n          New Study\n        ")])]}}],null,!1,1104517900),model:{value:e.createStudyDialog,callback:function(t){e.createStudyDialog=t},expression:"createStudyDialog"}},[n("study-info-card",{on:{"close-study-dialog":function(t){e.createStudyDialog=!1}}})],1)],1):e._e(),e._l(e.studies,function(t){return n("v-card",{key:t.id,staticClass:"mb-4 mx-2"},[n("v-card-title",{staticClass:"title purple darken-2 white--text"},[n("span",[e._v("\n        "+e._s(t.title)+"\n      ")]),n("v-spacer"),n("v-dialog",{attrs:{width:"400px",lazy:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[e.currentUserIsStaff?n("v-icon",e._g({},r),[e._v("\n            edit\n          ")]):e._e()]}}],null,!0),model:{value:e.editStudyDialog[t.id],callback:function(n){e.$set(e.editStudyDialog,t.id,n)},expression:"editStudyDialog[study.id]"}},[n("study-info-card",{key:e.editStudyDialog[t.id],attrs:{existingStudy:t},on:{"close-study-dialog":function(n){e.editStudyDialog[t.id]=!1}}})],1)],1),n("v-card-text",{staticClass:"text-xs-left"},[t.description?n("div",[e._v("\n        "+e._s(t.description)+"\n      ")]):n("div",{staticClass:"grey--text text--lighten-0 font-italic"},[e._v("\n        No description available\n      ")])]),n("v-card-actions",e._l(t.collaborators,function(t){return n("div",{key:t,staticClass:"px-1"},[e.getUserByUrl(t)?n("v-avatar",{staticClass:"m-1 white--text",attrs:{color:e.randomColor()}},[e.getUserByUrl(t).image?n("img",{attrs:{src:e.getUserByUrl(t).image}}):n("div",[e._v("\n            "+e._s(e.getUserInitialsFromUrl(t))+"\n          ")])]):e._e()],1)}),0)],1)})],2)},An=[],Ln=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-title",{staticClass:"headline green darken-3 white--text"},[n("span",[e._v("\n      "+e._s(e.cardTitle)+"\n    ")]),n("v-spacer"),e.existingStudy?n("v-icon",{staticStyle:{cursor:"pointer"},on:{dblclick:function(t){return e.deleteStudy(e.study)}}},[e._v("\n      delete\n    ")]):e._e()],1),n("v-card-text",[n("v-layout",{attrs:{wrap:"",column:""}},[n("v-form",{on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[n("v-text-field",{class:{hasError:e.$v.study.title.$error},attrs:{label:"Title",counter:255,"error-messages":e.titleErrors},on:{blur:function(t){return e.$v.study.$touch()}},model:{value:e.study.title,callback:function(t){e.$set(e.study,"title",t)},expression:"study.title"}}),n("v-textarea",{attrs:{label:"Description"},model:{value:e.study.description,callback:function(t){e.$set(e.study,"description",t)},expression:"study.description"}}),n("v-combobox",{attrs:{label:"Collaborators",chips:"",multiple:"",items:e.possibleCollaborators},model:{value:e.selectedCollaborators,callback:function(t){e.selectedCollaborators=t},expression:"selectedCollaborators"}})],1)],1)],1),n("v-card-actions",[n("v-spacer"),e.existingStudy?n("v-btn",{attrs:{color:"warning",flat:"",disabled:e.$v.study.$error},on:{click:e.updateExistingStudy}},[e._v("\n      Update\n    ")]):n("v-btn",{attrs:{color:"success",flat:"",disabled:e.$v.study.$error},on:{click:e.createNewStudy}},[e._v("\n      Create\n    ")]),n("v-btn",{attrs:{color:"error",flat:""},on:{click:function(t){return e.$emit("close-study-dialog")}}},[e._v("\n      Cancel\n    ")])],1)],1)},Fn=[],Rn=n("1dce"),zn=n.n(Rn),Hn=n("b5ae");function Wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wn(n,!0).forEach(function(t){Object(p["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Kn={name:"StudyInfoCard",props:{existingStudy:{type:Object}},created:function(){var e=this;this.study=Xn(this.existingStudy),this.fetchUsers({filters:{},pagination:{}}).then(this.selectedCollaborators=this.study.collaborators.map(function(t){return e.getCollaboratorName(e.getUserByUrl(t))}))},mixins:[Rn["validationMixin"]],computed:Yn({data:function(){return{selectedCollaborators:[]}},possibleCollaborators:function(){var e=this;return this.users.map(function(t){return e.getCollaboratorName(t)})},cardTitle:function(){return this.existingStudy?"Edit Existing Study":"Create New Study"},titleErrors:function(){var e=[];return this.$v.study.title.$dirty?(!this.$v.study.title.maxLength&&e.push("Title must be at most 255 characters long!"),!this.$v.study.title.required&&e.push("Title is required."),e):e}},Object(b["e"])("accounts",["users"]),{},Object(b["c"])("accounts",["getUserByUsername","getUserByUrl"])),validations:{study:{title:{required:Hn["required"],maxLength:Object(Hn["maxLength"])(255)}}},methods:Yn({getCollaboratorName:function(e){return"".concat(e.firstName," ").concat(e.lastName," [").concat(e.username,"]")},parseCollaboratorUsername:function(e){return e.split("[")[1].slice(0,-1)},getUserFromCollaboratorChoice:function(e){var t=this.parseCollaboratorUsername(e);return this.getUserByUsername(t)},fixCollaboratorsProperty:function(){var e=this;this.study.collaborators=this.selectedCollaborators.map(function(t){return e.getUserFromCollaboratorChoice(t).url})},closeDialog:function(){this.$emit("select-study",this.study.title),this.study=Object.assign({},Jn),this.$v.$reset(),this.$emit("close-study-dialog")},createNewStudy:function(){this.$v.study.$touch(),this.$v.study.$error||(this.fixCollaboratorsProperty(),this.createStudy(this.study).then(this.closeDialog()))},updateExistingStudy:function(){this.$v.study.$touch(),this.$v.study.$error||(this.fixCollaboratorsProperty(),this.updateStudy(this.study).then(this.closeDialog()))}},Object(b["b"])("accounts",["fetchUsers"]),{},Object(b["b"])("research",["createStudy","updateStudy","deleteStudy"]))},Jn={title:null,description:null,collaborators:[],subjects:[]};function Xn(e){return e?Object.assign({},e):Object.assign({},Jn)}var Zn=Kn,Qn=n("2b5d"),er=Object(y["a"])(Zn,Ln,Fn,!1,null,"06d99abe",null),tr=er.exports;function nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function rr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nr(n,!0).forEach(function(t){Object(p["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nr(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}S()(er,{VBtn:_["a"],VCard:fe["a"],VCardActions:pe["a"],VCardText:pe["b"],VCardTitle:be["a"],VCombobox:Qn["a"],VForm:ke["a"],VIcon:k["a"],VLayout:T["a"],VSpacer:N["a"],VTextField:X["a"],VTextarea:Nt["a"]});var ar={name:"StudyBrowser",components:{StudyInfoCard:tr},created:function(){var e=this;this.fetchUsers({filters:{},pagination:{}}).then(function(){return e.fetchStudies()})},data:function(){return{editStudyDialog:{},colors:["purple","cyan","blue","green","brown","pink","teal","orange"],createStudyDialog:!1}},computed:rr({},Object(b["c"])("accounts",["getUserByUrl","getUserInitialsFromUrl","currentUserIsStaff"]),{},Object(b["e"])("accounts",["users"]),{},Object(b["e"])("research",["studies"])),methods:rr({randomColor:function(){return ir(this.colors)}},Object(b["b"])("accounts",["fetchUsers"]),{},Object(b["b"])("research",["fetchStudies"]))};function ir(e){return e[Math.floor(Math.random()*e.length)]}var sr=ar,or=Object(y["a"])(sr,Mn,An,!1,null,"4d87b076",null),cr=or.exports;S()(or,{VAvatar:O["a"],VBtn:_["a"],VCard:fe["a"],VCardActions:pe["a"],VCardText:pe["b"],VCardTitle:be["a"],VDialog:Be["a"],VIcon:k["a"],VLayout:T["a"],VSpacer:N["a"]});var lr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{column:""}},[n("v-flex",{attrs:{grow:"","p-2":""}},[n("v-layout",{attrs:{column:""}},[n("subject-table")],1)],1)],1)},ur=[],dr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.currentUserIsStaff?n("v-layout",{attrs:{row:"","pl-3":"","pb-3":""}},[n("div",{staticClass:"title text-left"},[e._v("Subjects")]),n("v-spacer"),n("v-dialog",{attrs:{lazy:"",width:"400px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-btn",e._g({attrs:{color:"success"}},r),[e._v("\n          New Subject\n        ")])]}}],null,!1,1796519909),model:{value:e.createSubjectDialog,callback:function(t){e.createSubjectDialog=t},expression:"createSubjectDialog"}},[n("subject-info-card",{attrs:{createMode:!0},on:{"close-subject-dialog":function(t){e.createSubjectDialog=!1}}})],1)],1):e._e(),n("subject-table-controls",{attrs:{pagination:e.pagination},on:{"fetch-subjects-start":function(t){e.loading=!0},"fetch-subjects-end":function(t){e.loading=!1}}}),n("v-flex",[n("v-data-table",{attrs:{"item-key":"id",expand:e.expand,headers:e.headers,items:e.subjects,loading:e.loading,pagination:e.pagination,"rows-per-page-items":e.rowsPerPageItems},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[n("tr",{class:{selected:t.item.id===e.selectedSubjectId},on:{click:function(n){return e.selectSubject(t)}}},[n("td",{staticClass:"text-xs-left",staticStyle:{width:"50px"}},[e._v("\n            "+e._s(t.item.id)+"\n          ")]),n("td",{staticClass:"text-xs-left"},[e._v("\n            "+e._s(t.item.firstName)+"\n          ")]),n("td",{staticClass:"text-xs-left"},[e._v("\n            "+e._s(t.item.lastName)+"\n          ")]),n("td",{staticClass:"text-xs-left"},[e._v("\n            "+e._s(e._f("formatDate")(t.item.dateOfBirth))+"\n          ")]),n("td",{staticClass:"text-xs-left"},[e._v("\n            "+e._s(e.getSubjectSexDisplay(t.item))+"\n          ")]),n("td",{staticClass:"text-xs-left"},[e._v("\n            "+e._s(e.getSubjectGenderDisplay(t.item))+"\n          ")]),n("td",{staticClass:"text-xs-left"},[e._v("\n            "+e._s(e.getSubjectDominantHandDisplay(t.item))+"\n          ")]),e.currentUserIsStaff?n("td",{staticClass:"text-xs-left",staticStyle:{width:"50px"}},[n("v-dialog",{attrs:{width:"400px",lazy:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-icon",e._g({},r),[e._v("\n                  edit\n                ")])]}}],null,!0),model:{value:e.editSubjectDialog[t.item.id],callback:function(n){e.$set(e.editSubjectDialog,t.item.id,n)},expression:"editSubjectDialog[props.item.id]"}},[n("subject-info-card",{attrs:{existingSubject:t.item},on:{"close-subject-dialog":function(n){e.editSubjectDialog[t.item.id]=!1}}})],1)],1):e._e()])]}},{key:"expand",fn:function(e){return[n("v-flex",{staticClass:"embeded-table",attrs:{"px-2":"","py-2":""}},[n("subject-data"),n("hr")],1)]}}])})],1)],1)},fr=[],pr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{column:""}},[n("v-tabs",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[n("v-tab",[e._v("\n      MRI\n    ")]),n("v-tab-item",[n("br"),n("scan-table")],1)],1)],1)},br=[],mr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.currentUserIsStaff?n("v-layout",{attrs:{column:""}},[n("v-expansion-panel",{attrs:{popout:""}},[n("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[n("div",[e._v("\n            Upload\n          ")])]},proxy:!0}],null,!1,760168141)},[n("v-card",[n("v-card-text",[n("scan-upload",{attrs:{subject:e.subject},on:{"file-upload-complete":function(t){return e.update()}}})],1)],1)],1)],1),n("v-expansion-panel",{attrs:{popout:""}},[n("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[n("div",[e._v("\n            Study Group Association\n          ")])]},proxy:!0}],null,!1,1412684743)},[n("v-card",[n("v-card-text",[n("group-association",{attrs:{selectedScans:e.selected}})],1)],1)],1)],1)],1):e._e(),n("scan-table-controls",{ref:"tableController",attrs:{pagination:e.pagination},on:{"fetch-scans-start":function(t){e.loading=!0},"fetch-scans-end":function(t){e.loading=!1}}}),n("v-data-table",{attrs:{"item-key":"id","select-all":"",headers:e.headers,loading:e.loading,items:e.scans,"rows-per-page-items":e.pagination.rowsPerPageItems,pagination:e.pagination,"total-items":e.totalScanCount},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[n("tr",[n("td",[n("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(n){e.$set(t,"selected",n)},expression:"props.selected"}})],1),n("td",{staticClass:"text-left"},[e._v("\n          "+e._s(t.item.number)+"\n        ")]),n("td",{staticClass:"text-left"},[e._v("\n          "+e._s(t.item.description)+"\n        ")]),n("td",{staticClass:"text-left"},[e._v("\n          "+e._s(e.formatDate(t.item.time))+"\n        ")]),n("td",{staticClass:"text-left"},[e._v("\n          "+e._s(e.formatTime(t.item.time))+"\n        ")]),n("td",{staticClass:"text-left"},[t.item.sequenceType?n("v-dialog",{attrs:{lazy:"",width:"800px"},scopedSlots:e._u([{key:"activator",fn:function(r){var a=r.on;return[n("v-btn",e._g({staticClass:"info",attrs:{small:""}},a),[e._v("\n                "+e._s(e.sequenceTypeTitleFromUrl(t.item.sequenceType))+"\n              ")])]}}],null,!0),model:{value:e.sequenceTypeDialog[t.item.id],callback:function(n){e.$set(e.sequenceTypeDialog,t.item.id,n)},expression:"sequenceTypeDialog[props.item.id]"}},[n("protocol-information",{attrs:{scan:t.item}})],1):e._e()],1),n("td",{staticClass:"text-left"},[e._v("\n          "+e._s(e.formatSpatialResolution(t.item.spatialResolution))+"\n        ")]),n("td",e._l(t.item.studyGroups,function(r){return n("div",{key:r,staticClass:"text-xs-left"},[n("v-chip",{attrs:{small:"",close:""},on:{input:function(n){return e.disassociateFromGroup(t.item,r)}}},[e._v("\n              "+e._s(e.stringifyGroup(e.getGroupByUrl(r)))+"\n            ")])],1)}),0)])]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)},vr=[],hr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{column:""}},[n("v-layout",{attrs:{row:"","pl-3":""}},[n("v-flex",{attrs:{"pr-5":""}},[n("v-combobox",{attrs:{"append-outer-icon":"add_circle",label:"Select study",items:e.studies.map(function(e){return e.title})},on:{"click:append-outer":function(t){t.stopPropagation(),e.createStudyDialog=!0}},model:{value:e.selectedStudyTitle,callback:function(t){e.selectedStudyTitle=t},expression:"selectedStudyTitle"}}),n("v-dialog",{attrs:{width:"600px",lazy:"",persistent:""},model:{value:e.createStudyDialog,callback:function(t){e.createStudyDialog=t},expression:"createStudyDialog"}},[n("study-info-card",{on:{"close-study-dialog":function(t){e.createStudyDialog=!1},"select-study":function(t){e.selectedStudyTitle=arguments[0]}}})],1)],1),n("v-flex",{attrs:{"pr-5":""}},[n("v-combobox",{attrs:{"append-outer-icon":"add_circle",label:"Select group",disabled:!e.selectedStudy,items:e.studyGroups.map(function(e){return e.title})},on:{"click:append-outer":function(t){t.stopPropagation(),e.createGroupDialog=!0}},model:{value:e.selectedGroupTitle,callback:function(t){e.selectedGroupTitle=t},expression:"selectedGroupTitle"}}),n("v-dialog",{attrs:{width:"600px",lazy:"",persistent:""},model:{value:e.createGroupDialog,callback:function(t){e.createGroupDialog=t},expression:"createGroupDialog"}},[n("create-group-card",{attrs:{selectedStudy:e.selectedStudy},on:{"close-group-dialog":e.closeGroupDialog,"select-group":function(t){e.selectedGroupTitle=arguments[0]},"select-study":function(t){e.selectedStudyTitle=arguments[0]}}})],1)],1),n("v-btn",{attrs:{disabled:!e.validStudyGroupSelection},on:{click:e.addSelection}},[e._v("\n      Select Group\n    ")])],1),n("v-layout",{attrs:{row:"","pl-3":""}},[n("v-layout",{attrs:{column:""}},[n("v-flex",{staticClass:"text-xs-left",attrs:{"pb-1":""}},[e._v("\n        Selected Groups:\n      ")]),n("v-flex",{staticClass:"text-xs-left"},e._l(e.selectedStudyGroups,function(t){return n("span",{key:t.id},[n("v-chip",{attrs:{close:""},on:{input:function(n){return e.removeSelection(t)}},model:{value:e.selectionChips[t.id],callback:function(n){e.$set(e.selectionChips,t.id,n)},expression:"selectionChips[selection.id]"}},[e._v("\n            "+e._s(t.study.title+" | "+t.title)+"\n          ")])],1)}),0)],1),n("v-layout",{attrs:{shrink:""}},[n("v-btn",{attrs:{color:"success",disabled:!e.readyToAssociate},on:{click:e.associateScanToStudyGroups}},[e._v("\n        Associate\n      ")])],1)],1)],1)},gr=[],yr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-title",{staticClass:"headline cyan darken-3 white--text"},[e._v("\n    Create New Group\n  ")]),n("v-card-text",[n("v-layout",{attrs:{wrap:"",column:""}},[n("v-form",{on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[n("v-flex",{attrs:{"pb-4":""}},[n("v-text-field",{class:{hasError:e.$v.group.title.$error},attrs:{label:"Title",counter:255,"error-messages":e.titleErrors},on:{blur:function(t){return e.$v.group.title.$touch()}},model:{value:e.group.title,callback:function(t){e.$set(e.group,"title",t)},expression:"group.title"}})],1),n("v-flex",[n("v-textarea",{attrs:{label:"Description"},model:{value:e.group.description,callback:function(t){e.$set(e.group,"description",t)},expression:"group.description"}})],1),n("v-flex",{attrs:{"pb-4":""}},[n("v-combobox",{attrs:{label:"Study","error-messages":e.studyErrors,items:e.studies.map(function(e){return e.title})},on:{blur:function(t){return e.$v.selectedStudyTitle.$touch()}},model:{value:e.selectedStudyTitle,callback:function(t){e.selectedStudyTitle=t},expression:"selectedStudyTitle"}})],1)],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"cyan darken-1",flat:"",disabled:e.$v.group.$error},on:{click:e.createGroup}},[e._v("Submit")]),n("v-btn",{attrs:{color:"cyan darken-1",flat:""},on:{click:function(t){return e.$emit("close-group-dialog")}}},[e._v("Cancel")])],1)],1)},jr=[];function Sr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function xr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sr(n,!0).forEach(function(t){Object(p["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sr(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Or={title:"",description:"",study:{title:""}},_r={name:"CreateGroupCard",created:function(){this.$store.dispatch("research/fetchStudies")},props:{selectedStudy:Object},mixins:[Rn["validationMixin"]],validations:{group:{title:{required:Hn["required"],maxLength:Object(Hn["maxLength"])(255)}},selectedStudyTitle:{required:Hn["required"]}},data:function(){return{group:Object.assign({},Or)}},computed:xr({selectedStudyTitle:{get:function(){return this.selectedStudy.title},set:function(e){e&&this.$emit("select-study",e)}},titleErrors:function(){var e=[];return this.$v.group.title.$dirty?(!this.$v.group.title.maxLength&&e.push("Title must be at most 255 characters long!"),!this.$v.group.title.required&&e.push("Title is required."),e):e},studyErrors:function(){var e=[];return this.$v.selectedStudyTitle.$dirty?(!this.$v.selectedStudyTitle.required&&e.push("Study selection is required."),e):e}},Object(b["e"])("research",["studies"])),methods:{closeDialog:function(){this.$emit("select-group",this.group.title),this.group=Object.assign({},Or),this.$v.$reset(),this.$emit("close-group-dialog")},createGroup:function(){this.group.study=this.selectedStudy.url,this.$v.group.$touch(),this.$v.group.$error||(this.$store.dispatch("research/createGroup",this.group).catch(console.error),this.closeDialog())}}},wr=_r,Pr=Object(y["a"])(wr,yr,jr,!1,null,"09ffb080",null),Dr=Pr.exports;function kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Tr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kr(n,!0).forEach(function(t){Object(p["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kr(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}S()(Pr,{VBtn:_["a"],VCard:fe["a"],VCardActions:pe["a"],VCardText:pe["b"],VCardTitle:be["a"],VCombobox:Qn["a"],VFlex:ve["a"],VForm:ke["a"],VLayout:T["a"],VSpacer:N["a"],VTextField:X["a"],VTextarea:Nt["a"]});var Cr={name:"GroupAssociation",props:{selectedScans:Array},components:{StudyInfoCard:tr,CreateGroupCard:Dr},created:function(){this.$store.dispatch("research/fetchStudies"),this.$store.dispatch("research/fetchGroups")},data:function(){return{selectedStudyTitle:"",selectedGroupTitle:"",selectedStudyGroups:[],selectionChips:{},createStudyDialog:!1,createGroupDialog:!1}},computed:Tr({selectedStudy:function(){var e=Vr(this.selectedStudyTitle,this.studies.map(function(e){return e.title}));return e?this.getStudyByTitle(this.selectedStudyTitle):null},selectedGroup:function(){return""!=this.selectedGroupTitle&&null!=this.selectedStudy?this.getStudyGroupByTitle({study:this.selectedStudy,groupTitle:this.selectedGroupTitle}):null},studyGroups:function(){return null!=this.selectedStudy?this.getStudyGroups(this.selectedStudy):[]},validStudyGroupSelection:function(){var e=-1==this.selectedStudyGroups.indexOf(this.selectedGroup);return this.selectedGroup&&e},readyToAssociate:function(){return 0!=this.selectedStudyGroups.length&&0!=this.selectedScans.length}},Object(b["e"])("research",["studies","groups"]),{},Object(b["c"])("research",["getStudyByTitle","getStudyGroups","getStudyGroupByTitle"])),watch:{selectedStudy:function(){this.selectedGroupTitle=""}},methods:Tr({getSelectionString:function(){return"".concat(this.selectedStudy.title," | ").concat(this.selectedGroup.title)},addSelection:function(){this.selectionChips[this.selectedGroup.id]=!0,this.selectedStudyGroups.push(this.selectedGroup)},removeSelection:function(e){delete this.selectionChips[e.id],this.selectedStudyGroups=this.selectedStudyGroups.filter(function(t){return t.id!=e.id})},associateScanToStudyGroups:function(){var e=this;this.selectedScans.forEach(function(t){e.selectedStudyGroups.map(function(e){return e.url}).forEach(function(e){Vr(e,t.studyGroups)||t.studyGroups.push(e)}),e.updateScan(t)})},closeGroupDialog:function(){this.createGroupDialog=!1}},Object(b["b"])("mri",["updateScan"]))};function Vr(e,t){return t.indexOf(e)>-1}var Ir=Cr,Er=Object(y["a"])(Ir,hr,gr,!1,null,"1c6727da",null),$r=Er.exports;S()(Er,{VBtn:_["a"],VChip:mt["a"],VCombobox:Qn["a"],VDialog:Be["a"],VFlex:ve["a"],VLayout:T["a"]});var Br=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"large-12 medium-12 small-12 cell"},[n("label",[n("input",{ref:"files",attrs:{accept:".dcm, .zip",id:"files",type:"file",multiple:""},on:{change:function(t){return e.handleFileUploads()}}})]),n("div",{staticClass:"text-left caption"},[e._v("\n      "+e._s(e.fileProgressLabel)+"\n    ")]),n("v-progress-linear",{model:{value:e.fileUploadPercentage,callback:function(t){e.fileUploadPercentage=t},expression:"fileUploadPercentage"}}),n("div",{staticClass:"text-left caption"},[e._v("\n      "+e._s(e.totalProgressLabel)+"\n    ")]),n("v-progress-linear",{model:{value:e.totalUploadPercentage,callback:function(t){e.totalUploadPercentage=t},expression:"totalUploadPercentage"}}),n("v-btn",{attrs:{small:"",disabled:!e.files},on:{click:function(t){return e.submitFiles()}}},[e._v("\n      Upload\n    ")])],1)])},Ur=[],Nr=(n("96cf"),n("3b8d")),qr=n("bc3a"),Gr=n.n(qr),Mr="csrftoken",Ar="X-CSRFToken",Lr=Gr.a.create({xsrfCookieName:Mr,xsrfHeaderName:Ar}),Fr=Lr,Rr={name:"ScanUpload",props:{subject:Object},data:function(){return{form:null,files:null,fileUploadPercentage:0,totalUploadPercentage:0,fileProgressLabel:"File progress",totalProgressLabel:"Total progress"}},methods:{handleFileUploads:function(){this.files=this.$refs.files.files},submitFiles:function(){var e=Object(Nr["a"])(regeneratorRuntime.mark(function e(){var t,n,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=r.files[n],a=new FormData,a.append("file",t),a.append("subject_id",r.subject.id),r.fileProgressLabel="Uploading ".concat(t.name,"..."),e.next=7,r.submitFile(a).then(function(){this.totalUploadPercentage=parseInt(Math.round(100*n/this.files.length)),this.fileProgressLabel="".concat(t.name," successfully uploaded!"),this.totalProgressLabel="Total progress ( ".concat(n+1," / ").concat(this.files.length," )")}.bind(r));case 7:case"end":return e.stop()}},e)}),n=0;case 2:if(!(n<this.files.length)){e.next=7;break}return e.delegateYield(t(),"t0",4);case 4:n++,e.next=2;break;case 7:this.$refs.files.value="",this.files=null,this.fileUploadPercentage=0,this.totalUploadPercentage=0,this.fileProgressLabel="File progress",this.totalProgressLabel="Total progress";case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),submitFile:function(e){var t=this;return Fr.post("/api/mri/scan/from_file/",e,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){this.fileUploadPercentage=parseInt(Math.round(100*e.loaded/e.total))}.bind(this)}).then(function(){return t.$emit("file-upload-complete")}).catch(console.error)}}},zr=Rr,Hr=n("8e36"),Wr=Object(y["a"])(zr,Br,Ur,!1,null,"33886e98",null),Yr=Wr.exports;S()(Wr,{VBtn:_["a"],VProgressLinear:Hr["a"]});var Kr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{row:"","px-4":""}},[n("v-text-field",{attrs:{label:"Number"},model:{value:e.filters.number,callback:function(t){e.$set(e.filters,"number",t)},expression:"filters.number"}}),n("v-spacer"),n("v-text-field",{attrs:{label:"Description"},model:{value:e.filters.description,callback:function(t){e.$set(e.filters,"description",t)},expression:"filters.description"}}),n("v-spacer"),n("v-flex",[n("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-text-field",e._g({attrs:{label:"Scanned After",readonly:"",clearable:""},model:{value:e.filters.afterDate,callback:function(t){e.$set(e.filters,"afterDate",t)},expression:"filters.afterDate"}},r))]}}]),model:{value:e.afterDateMenu,callback:function(t){e.afterDateMenu=t},expression:"afterDateMenu"}},[n("v-date-picker",{on:{input:function(t){e.afterDateMenu=!1}},model:{value:e.filters.afterDate,callback:function(t){e.$set(e.filters,"afterDate",t)},expression:"filters.afterDate"}})],1)],1),n("v-spacer"),n("v-flex",[n("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-text-field",e._g({attrs:{label:"Scanned Before",readonly:"",clearable:""},model:{value:e.filters.beforeDate,callback:function(t){e.$set(e.filters,"beforeDate",t)},expression:"filters.beforeDate"}},r))]}}]),model:{value:e.beforeDateMenu,callback:function(t){e.beforeDateMenu=t},expression:"beforeDateMenu"}},[n("v-date-picker",{on:{input:function(t){e.beforeDateMenu=!1}},model:{value:e.filters.beforeDate,callback:function(t){e.$set(e.filters,"beforeDate",t)},expression:"filters.beforeDate"}})],1)],1),n("v-spacer"),n("v-combobox",{attrs:{label:"Sequence Type",items:e.sequenceTypes.map(function(e){return e.title})},model:{value:e.filters.sequenceType,callback:function(t){e.$set(e.filters,"sequenceType",t)},expression:"filters.sequenceType"}})],1)},Jr=[];function Xr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Zr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xr(n,!0).forEach(function(t){Object(p["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xr(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Qr={name:"ScanTableControls",props:{pagination:Object},created:function(){this.$set(this.filters,"subject",this.subject.id)},data:function(){return{filters:{number:"",description:"",afterDate:"",beforeDate:"",sequenceType:"",dicomId:"",subject:""},afterDateMenu:!1,beforeDateMenu:!1}},computed:Zr({},Object(b["e"])("mri",["sequenceTypes"]),{},Object(b["c"])("research",{subject:"getSelectedSubject"})),methods:Zr({update:function(){this.$emit("fetch-scans-start"),this.fetchScans({filters:this.filters,pagination:this.pagination}),this.$emit("fetch-scans-end")}},Object(b["b"])("mri",["fetchScans"])),watch:{subject:function(e){this.$set(this.filters,"subject",e.id)},filters:{handler:function(){this.update()},deep:!0},pagination:{handler:function(){this.update()},deep:!0}}},ea=Qr,ta=Object(y["a"])(ea,Kr,Jr,!1,null,"e398340e",null),na=ta.exports;function ra(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function aa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ra(n,!0).forEach(function(t){Object(p["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ra(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}S()(ta,{VCombobox:Qn["a"],VDatePicker:et["a"],VFlex:ve["a"],VLayout:T["a"],VMenu:B["a"],VSpacer:N["a"],VTextField:X["a"]});var ia={name:"ScanTable",components:{GroupAssociation:$r,ProtocolInformation:gt,ScanTableControls:na,ScanUpload:Yr},created:function(){this.fetchSequenceTypes(),this.fetchGroups()},data:function(){return{sequenceTypeDialog:{},headers:[{text:"Number",value:"number"},{text:"Description",value:"description"},{text:"Date",value:"date",sortable:!1},{text:"Time",value:"time",sortable:!1},{text:"Sequence Type",value:"sequenceType",sortable:!1},{text:"Spatial Resolution",value:"spatialResolution",sortable:!1},{text:"Study Groups",value:"studyGroups",sortable:!1}],selected:[],pagination:{rowsPerPage:25,page:1,sortBy:"number",descending:!1,rowsPerPageItems:[10,25,50,{text:"$vuetify.dataIterator.rowsPerPageAll",value:1e5}]},loading:!1}},computed:aa({},Object(b["c"])("accounts",["currentUserIsStaff"]),{},Object(b["e"])("mri",["scans","totalScanCount"]),{},Object(b["c"])("mri",["getSequenceTypeByUrl"]),{},Object(b["c"])("research",{subject:"getSelectedSubject"}),{},Object(b["c"])("research",["getGroupByUrl"])),methods:aa({disassociateFromGroup:function(e,t){e.studyGroups=e.studyGroups.filter(function(e){return e!=t}),this.updateScan(e)},formatSpatialResolution:function(e){return e.map(function(e){return parseFloat(e.toFixed(2))}).toString().replace(/,/g," x ").trim()},formatDate:function(e){if(!e)return null;var t=e.slice(0,10).split("-"),n=Object(Kt["a"])(t,3),r=n[0],a=n[1],i=n[2];return"".concat(i,"/").concat(a,"/").concat(r)},formatTime:function(e){return e?e.slice(11,23):null},stringifyGroup:function(e){return e?"".concat(e.study.title," | ").concat(e.title):null},sequenceTypeTitleFromUrl:function(e){var t=this.getSequenceTypeByUrl(e);return t?t.title:null},update:function(){this.$refs.tableController.update()}},Object(b["b"])("mri",["fetchSequenceTypes","updateScan"]),{},Object(b["b"])("research",["fetchGroups"]))},sa=ia,oa=n("ac7c"),ca=n("cd55"),la=n("49e2"),ua=Object(y["a"])(sa,mr,vr,!1,null,"0b0366fa",null),da=ua.exports;function fa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function pa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fa(n,!0).forEach(function(t){Object(p["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fa(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}S()(ua,{VBtn:_["a"],VCard:fe["a"],VCardText:pe["b"],VCheckbox:oa["a"],VChip:mt["a"],VDataTable:Rt["a"],VDialog:Be["a"],VExpansionPanel:ca["a"],VExpansionPanelContent:la["a"],VLayout:T["a"]});var ba={name:"SubjectData",components:{ScanTable:da},data:function(){return{active:0}},computed:pa({},Object(b["c"])("research",{subject:"getSelectedSubject"})),methods:pa({},Object(b["d"])("research",["setSelectedSubjectId"]))},ma=ba,va=Object(y["a"])(ma,pr,br,!1,null,"89263132",null),ha=va.exports;S()(va,{VLayout:T["a"],VTab:Bn["a"],VTabItem:Un["a"],VTabs:Nn["a"]});var ga=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{row:"","pl-4":""}},[n("v-text-field",{staticStyle:{width:"5px"},attrs:{label:"ID"},model:{value:e.filters.id,callback:function(t){e.$set(e.filters,"id",t)},expression:"filters.id"}}),n("v-spacer"),n("v-text-field",{staticStyle:{width:"120px"},attrs:{label:"First Name",disabled:Boolean(e.filters.id)},model:{value:e.filters.firstName,callback:function(t){e.$set(e.filters,"firstName",t)},expression:"filters.firstName"}}),n("v-spacer"),n("v-text-field",{staticStyle:{width:"120px"},attrs:{label:"Last Name",disabled:Boolean(e.filters.id)},model:{value:e.filters.lastName,callback:function(t){e.$set(e.filters,"lastName",t)},expression:"filters.lastName"}}),n("v-spacer"),n("v-flex",[n("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-text-field",e._g({staticStyle:{width:"160px"},attrs:{clearable:"",readonly:"",label:"Born After","prepend-icon":"event",disabled:Boolean(e.filters.id)},model:{value:e.filters.bornAfter,callback:function(t){e.$set(e.filters,"bornAfter",t)},expression:"filters.bornAfter"}},r))]}}]),model:{value:e.bornAfterMenu,callback:function(t){e.bornAfterMenu=t},expression:"bornAfterMenu"}},[n("v-date-picker",{on:{input:function(t){e.bornAfterMenu=!1}},model:{value:e.filters.bornAfter,callback:function(t){e.$set(e.filters,"bornAfter",t)},expression:"filters.bornAfter"}})],1)],1),n("v-spacer"),n("v-flex",[n("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-text-field",e._g({staticStyle:{width:"160px"},attrs:{clearable:"",readonly:"",label:"Born Before","prepend-icon":"event",disabled:Boolean(e.filters.id)},model:{value:e.filters.bornBefore,callback:function(t){e.$set(e.filters,"bornBefore",t)},expression:"filters.bornBefore"}},r))]}}]),model:{value:e.bornBeforeMenu,callback:function(t){e.bornBeforeMenu=t},expression:"bornBeforeMenu"}},[n("v-date-picker",{on:{input:function(t){e.bornBeforeMenu=!1}},model:{value:e.filters.bornBefore,callback:function(t){e.$set(e.filters,"bornBefore",t)},expression:"filters.bornBefore"}})],1)],1),n("v-select",{staticStyle:{width:"70px"},attrs:{clearable:"",label:"Sex",disabled:Boolean(e.filters.id),items:Object.keys(e.sexOptions)},model:{value:e.filters.sex,callback:function(t){e.$set(e.filters,"sex",t)},expression:"filters.sex"}}),n("v-spacer"),n("v-select",{staticStyle:{width:"120px"},attrs:{clearable:"",label:"Gender",disabled:Boolean(e.filters.id),items:Object.keys(e.genderOptions)},model:{value:e.filters.gender,callback:function(t){e.$set(e.filters,"gender",t)},expression:"filters.gender"}}),n("v-spacer"),n("v-select",{staticStyle:{width:"120px"},attrs:{clearable:"",label:"Dominant Hand",disabled:Boolean(e.filters.id),items:Object.keys(e.dominantHandOptions)},model:{value:e.filters.dominantHand,callback:function(t){e.$set(e.filters,"dominantHand",t)},expression:"filters.dominantHand"}})],1)},ya=[];function ja(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Sa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ja(n,!0).forEach(function(t){Object(p["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ja(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var xa={name:"SubjectTableControls",props:{pagination:Object},created:function(){this.fetchSubjects({filters:this.filters,pagination:this.pagination})},data:function(){return{bornAfterMenu:!1,bornBeforeMenu:!1,filters:{id:"",firstName:"",lastName:"",bornAfter:"",bornBefore:"",sex:"",gender:"",dominantHand:""},sexOptions:Jt,genderOptions:Xt,dominantHandOptions:Zt}},methods:Sa({update:function(){this.$emit("fetch-subjects-start"),this.fetchSubjects({filters:this.filters,pagination:this.pagination}),this.$emit("fetch-subjects-end")}},Object(b["b"])("research",["fetchSubjects"])),watch:{filters:{handler:function(){this.update()},deep:!0},pagination:{handler:function(){this.update()},deep:!0}}},Oa=xa,_a=Object(y["a"])(Oa,ga,ya,!1,null,"4c209bf3",null),wa=_a.exports;function Pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Da(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pa(n,!0).forEach(function(t){Object(p["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pa(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}S()(_a,{VDatePicker:et["a"],VFlex:ve["a"],VLayout:T["a"],VMenu:B["a"],VSelect:tt["a"],VSpacer:N["a"],VTextField:X["a"]});var ka={name:"SubjectTable",components:{SubjectData:ha,SubjectInfoCard:cn,SubjectTableControls:wa},created:function(){var e=this;this.fetchUsers({filters:{},pagination:{}}).then(function(){return e.appendEditColumn()})},data:function(){return{headers:[{text:"ID",value:"id",align:"left"},{text:"First Name",value:"givenName"},{text:"Last Name",value:"familyName"},{text:"Date of Birth",value:"dateOfBirth"},{text:"Sex",value:"sex"},{text:"Gender",value:"gender"},{text:"Dominant Hand",value:"dominantHand"}],rowsPerPageItems:[10,25,50,{text:"$vuetify.dataIterator.rowsPerPageAll",value:1e5}],pagination:{rowsPerPage:100,page:1,sortBy:"id",descending:!0},expand:!1,loading:!1,createSubjectDialog:!1,editSubjectDialog:{},sexOptions:Jt,genderOptions:Xt,dominantHandOptions:Zt}},computed:Da({},Object(b["e"])("research",["subjects","selectedSubjectId"]),{},Object(b["c"])("accounts",["currentUserIsStaff"])),methods:Da({getSubjectSexDisplay:function(e){return Qt(this.sexOptions,e.sex)},getSubjectGenderDisplay:function(e){return Qt(this.genderOptions,e.gender)},getSubjectDominantHandDisplay:function(e){return Qt(this.dominantHandOptions,e.dominantHand)},appendEditColumn:function(){this.currentUserIsStaff&&this.headers.push({text:"Edit",value:"editSubject"})},selectSubject:function(e){e.expanded=!e.expanded,e.expanded?this.setSelectedSubjectId(e.item.id):this.setSelectedSubjectId(null)}},Object(b["b"])("accounts",["fetchUsers"]),{},Object(b["d"])("research",["setSelectedSubjectId"]))},Ta=ka,Ca=(n("5aa5"),Object(y["a"])(Ta,dr,fr,!1,null,"29c51cfe",null)),Va=Ca.exports;function Ia(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ea(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ia(n,!0).forEach(function(t){Object(p["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ia(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}S()(Ca,{VBtn:_["a"],VDataTable:Rt["a"],VDialog:Be["a"],VFlex:ve["a"],VIcon:k["a"],VLayout:T["a"],VSpacer:N["a"]});var $a={name:"SubjectBrowser",components:{SubjectTable:Va},computed:Ea({},Object(b["e"])("research",["selectedSubjectId"]))},Ba=$a,Ua=Object(y["a"])(Ba,lr,ur,!1,null,"072a128f",null),Na=Ua.exports;S()(Ua,{VFlex:ve["a"],VLayout:T["a"]});var qa="http://localhost:8080/api",Ga="https://pylabber.org/api",Ma="production",Aa=qa;"production"==Ma&&(Aa=Ga);var La,Fa,Ra=Aa,za="".concat(Ra,"/accounts/"),Ha="".concat(za,"/user/"),Wa=("".concat(za,"/profile/"),"".concat(za,"/laboratory/")),Ya=function(e){var t=e.filters,n=e.pagination;return"?id=".concat(t.id||"","&username=").concat(t.username||"","&page_size=").concat(n.rowsPerPage||100,"&page=").concat(n.page||1,"&ordering=").concat(n.descending?"-"+n.sortBy:n.sortBy)},Ka=n("d058"),Ja={users:[],labs:[]},Xa={getUserByUsername:function(e){return function(t){return e.users.find(function(e){return e.username==t})}},getUserByUrl:function(e){return function(t){return e.users.find(function(e){return e.url==t})}},getUserInitialsFromUrl:function(e,t){return function(e){var n=t.getUserByUrl(e).user;return"".concat(n.firstName[0]).concat(n.lastName[0])}},currentUser:function(e,t,n){return e.users.find(function(e){return e.username===n.auth.user.username})},currentUserIsStaff:function(e,t){return!!t.currentUser&&t.currentUser.isStaff}},Za={setUsers:function(e,t){e.users=t},setLabs:function(e,t){e.labs=t}},Qa={fetchUsers:function(e,t){var n=e.commit,r=t.filters,a=t.pagination,i=Ya({filters:r,pagination:a});return Fr.get("".concat(Ha,"/").concat(i)).then(function(e){var t=e.data;return t.results.map(function(e){return Ka(e)})}).then(function(e){return n("setUsers",e)}).catch(console.error)},fetchLabs:function(e){var t=e.commit;return Fr.get(Wa).then(function(e){var t=e.data;return t.results.map(function(e){return Ka(e)})}).then(function(e){return t("setLabs",e)}).catch(console.error)}},ei={namespaced:!0,state:Ja,getters:Xa,mutations:Za,actions:Qa},ti="".concat(Ra,"/auth/user/"),ni="".concat(Ra,"/auth/login/"),ri="".concat(Ra,"/auth/logout/"),ai="".concat(Ra,"/auth/password/change/"),ii="".concat(Ra,"/auth/password/reset/"),si="".concat(Ra,"/auth/password/reset/confirm/"),oi={login:function(e,t){return Fr.post(ni,{username:e,password:t})},logout:function(){return Fr.post(ri,{})},changeAccountPassword:function(e,t){return Fr.post(ai,{password1:e,password2:t})},sendAccountPasswordResetEmail:function(e){return Fr.post(ii,{email:e})},resetAccountPassword:function(e,t,n,r){return Fr.post(si,{uid:e,token:t,new_password1:n,new_password2:r})},getAccountDetails:function(){return Fr.get(ti)},updateAccountDetails:function(e){return Fr.patch(ti,e)}},ci="LOGIN_BEGIN",li="LOGIN_FAILURE",ui="LOGIN_SUCCESS",di="LOGOUT",fi="PASSWORD_EMAIL_BEGIN",pi="PASSWORD_EMAIL_CLEAR",bi="PASSWORD_EMAIL_FAILURE",mi="PASSWORD_EMAIL_SUCCESS",vi="PASSWORD_RESET_BEGIN",hi="PASSWORD_RESET_CLEAR",gi="PASSWORD_RESET_FAILURE",yi="PASSWORD_RESET_SUCCESS",ji="SET_TOKEN",Si="REMOVE_TOKEN",xi="SET_USER",Oi="TOKEN_STORAGE_KEY",_i={authenticating:!1,error:!1,token:null,user:{username:""}},wi={isAuthenticated:function(e){return!!e.token}},Pi=(La={},Object(p["a"])(La,ci,function(e){e.authenticating=!0,e.error=!1}),Object(p["a"])(La,li,function(e){e.authenticating=!1,e.error=!0}),Object(p["a"])(La,ui,function(e){e.authenticating=!1,e.error=!1}),Object(p["a"])(La,di,function(e){e.authenticating=!1,e.error=!1}),Object(p["a"])(La,ji,function(e,t){e.token=t,localStorage.setItem(Oi,t),Fr.defaults.headers.Authorization="Token ".concat(t)}),Object(p["a"])(La,Si,function(e){e.token=null,localStorage.removeItem(Oi),delete Fr.defaults.headers.Authorization}),Object(p["a"])(La,xi,function(e,t){e.user=t}),La),Di={login:function(e,t){var n=e.commit,r=t.username,a=t.password;return n(ci),oi.login(r,a).then(function(e){var t=e.data;return n(ji,t.key)}).then(function(){return n(xi)}).then(function(){return n(ui)}).catch(function(){return n(li)})},logout:function(e){var t=e.commit;return oi.logout().then(function(){return t(di)}).finally(function(){return t(Si)})},initialize:function(e){var t=e.commit,n=e.dispatch,r=localStorage.getItem(Oi);r&&(t(ji,r),n("getUser"))},getUser:function(e){var t=e.commit;return oi.getAccountDetails().then(function(e){var n=e.data;return t(xi,n)})}},ki={namespaced:!0,state:_i,getters:wi,actions:Di,mutations:Pi},Ti="".concat(Ra,"/dicom/"),Ci=("".concat(Ti,"/image/"),"".concat(Ti,"/patient/")),Vi="".concat(Ti,"/series/"),Ii="".concat(Ti,"/study/"),Ei=function(e){var t=e.filters,n=e.pagination;return"?id=".concat(t.id||"","&uid=").concat(t.uid||"","&uid_lookup=icontains&born_after_date=").concat(t.bornAfter||"","&born_before_date=").concat(t.bornBefore||"","&name_prefix=&given_name=").concat(t.firstName||"","&given_name_lookup=icontains&middle_name=&middle_name_lookup=&family_name=").concat(t.lastName||"","&family_name_lookup=icontains&name_suffix=&sex=").concat(t.sex?t.sex[0]:"","&study__id=").concat(t.studyId||"","&page_size=").concat(n.rowsPerPage||100,"&page=").concat(n.page||1,"&ordering=").concat(n.descending?"-"+n.sortBy:n.sortBy)},$i=function(e){var t=e.filters,n=e.pagination;return"?id=".concat(t.id||"","&uid=").concat(t.uid||"","&study_uid=").concat(t.studyUid||"","&study_description=").concat(t.study_description||"","&modality=").concat(t.modality||"","&description=").concat(t.description||"","&description_lookup=icontains&protocol_name=&number=").concat(t.number||"","&created_after_date=").concat(t.afterDate||"","&created_before_date=").concat(t.beforeDate||"","&date=").concat(t.date||"","&created_after_time=").concat(t.afterTime||"","&created_before_time=").concat(t.beforeTime||"","&echo_time=").concat(t.echoTime||"","&inversion_time=").concat(t.inversionTime||"","&repetition_time=").concat(t.repetitionTime||"","&flip_angle=").concat(t.flipAngle||"","&manufacturer=").concat(t.manufacturer||"","&manufacturer_model_name=").concat(t.manufacturersModelName||"","&magnetic_field_strength=").concat(t.magneticFieldStrength||"","&device_serial_number=").concat(t.deviceSerialNumber||"","&institution_name=").concat(t.institutionName||"","&patient__id=").concat(t.patientId||"","&page_size=").concat(n.rowsPerPage||100,"&page=").concat(n.page||1,"&ordering=").concat(n.descending?"-"+n.sortBy:n.sortBy)},Bi=function(e){var t=e.filters,n=e.pagination;return"?id=".concat(t.id||"","&uid=").concat(t.uid||"","&description=").concat(t.description||"","&description_lookup=icontains&created_after_date=").concat(t.afterDate||"","&created_before_date=").concat(t.beforeDate||"","&created_after_time=").concat(t.afterTime||"","&created_before_time=").concat(t.beforeTime||"","&page_size=").concat(n.rowsPerPage||100,"&page=").concat(n.page||1,"&ordering=").concat(n.descending?"-"+n.sortBy:n.sortBy)},Ui=n("d058"),Ni={patients:[],patientCount:0,selectedPatientId:null,seriesList:[],seriesCount:0,studies:[],studyCount:0,selectedStudyId:null},qi={getSeriesByUrl:function(e){return function(t){return e.seriesList.find(function(e){return e.url===t})}},getPatientByUrl:function(e){return function(t){return e.patients.find(function(e){return e.url===t})}}},Gi={setPatients:function(e,t){e.patients=t},setPatientCount:function(e,t){e.patientCount=t},setSelectedPatientId:function(e,t){e.selectedPatientId=t},setSeries:function(e,t){e.seriesList=t},setSeriesCount:function(e,t){e.seriesCount=t},setStudies:function(e,t){e.studies=t},setStudyCount:function(e,t){e.studyCount=t},setSelectedStudyId:function(e,t){e.selectedStudyId=t}},Mi={fetchPatients:function(e,t){var n=e.commit,r=t.filters,a=t.pagination,i=Ei({filters:r,pagination:a});return Fr.get("".concat(Ci,"/").concat(i)).then(function(e){var t=e.data;n("setPatients",t.results.map(function(e){return Ui(e)})),n("setPatientCount",t.count)}).catch(console.error)},fetchSeries:function(e,t){var n=e.commit,r=t.filters,a=t.pagination,i=$i({filters:r,pagination:a});return Fr.get("".concat(Vi,"/").concat(i)).then(function(e){var t=e.data;n("setSeries",t.results.map(function(e){return Ui(e)})),n("setSeriesCount",t.count)}).catch(console.error)},fetchStudies:function(e,t){var n=e.commit,r=t.filters,a=t.pagination,i=Bi({filters:r,pagination:a});return Fr.get("".concat(Ii,"/").concat(i)).then(function(e){var t=e.data;n("setStudies",t.results.map(function(e){return Ui(e)})),n("setStudyCount",t.count)}).catch(console.error)}},Ai={namespaced:!0,state:Ni,getters:qi,mutations:Gi,actions:Mi},Li="".concat(Ra,"/mri/"),Fi="".concat(Li,"/scan/"),Ri="".concat(Li,"/sequence_type/"),zi=function(e){var t=e.filters,n=e.pagination;return"?id=".concat(t.id||"","&description=").concat(t.description||"","&description_lookup=icontains&dicom_id_in=").concat(t.dicomIdIn?t.dicomIdIn.join():"","&number=").concat(t.number||"","&created_after=&created_before=&scan_time_after=").concat(t.afterDate||"","&scan_time_before=").concat(t.beforeDate||"","&echo_time=&inversion_time=&repetition_time=&institution_name=&is_updated_from_dicom=&dicom__id=").concat(t.dicomId||"","&subject=").concat(t.subject||"","&page_size=").concat(n.rowsPerPage||100,"&page=").concat(n.page||1,"&ordering=").concat(n.descending?"-"+n.sortBy:n.sortBy)},Hi=n("d058"),Wi={sequenceTypes:[],scans:[],totalScanCount:0},Yi={getSequenceTypeByUrl:function(e){return function(t){return e.sequenceTypes.find(function(e){return e.url===t})}},getScanByDicomSeries:function(e){return function(t){return e.scans.find(function(e){return e.dicom===t.url})}},getDicomSeriesSequenceType:function(e){return function(t){return e.sequenceTypes.find(function(e){return s(e.scanningSequence,t.scanningSequence)&&s(e.sequenceVariant,t.sequenceVariant)})}}},Ki={setSequenceTypes:function(e,t){e.sequenceTypes=t},setScans:function(e,t){e.scans=t},setTotalScanCount:function(e,t){e.totalScanCount=t},addScan:function(e,t){e.scans.push(t)},removeScanFromState:function(e,t){e.scans=e.scans.filter(function(e){return e.id!=t.id})},updateScanState:function(e,t){var n=e.scans.indexOf(e.scans.find(function(e){return e.id===t.id})),r=e.scans.slice();r[n]=t,e.scans=r}},Ji={fetchScans:function(e,t){var n=e.commit,r=t.filters,a=t.pagination,i=zi({filters:r,pagination:a});return Fr.get("".concat(Fi,"/").concat(i)).then(function(e){var t=e.data;return n("setTotalScanCount",t.count),t.results.map(function(e){return Hi(e)})}).then(function(e){n("setScans",e)}).catch(console.error)},fetchSequenceTypes:function(e){var t=e.commit;return Fr.get(Ri).then(function(e){var t=e.data;return t.results.map(function(e){return Hi(e)})}).then(function(e){return t("setSequenceTypes",e)}).catch(console.error)},getOrCreateScanFromDicomSeries:function(e,t){var n=e.commit;return Fr.post(Fi,{dicom:t.url}).then(function(e){var t=e.data;return Hi(t)}).then(function(e){return n("addScan",e),e}).catch(console.error)},getOrCreateScanInfoFromDicomSeries:function(e,t){return Fr.get("".concat(Fi,"/from_dicom/").concat(t.id,"/")).then(function(e){var t=e.data;return Hi(t)}).catch(console.error)},associateDicomSeriesToStudyGroups:function(e,t){var n=e.commit,r=e.dispatch,a=e.getters,i=t.dicomSeries,s=t.studyGroups;r("getOrCreateScanFromDicomSeries",i).then(function(){var e=a["getScanByDicomSeries"](i),t=s.map(function(e){return e.url}),r=Object(St["a"])(new Set(e.studyGroups.concat(t)));Fr.patch("".concat(Fi,"/").concat(e.id,"/"),{study_groups:r}).then(function(e){var t=e.data;n("removeScanFromState",t),n("addScan",t)}).catch(console.error)}).catch(console.error)},createScan:function(e,t){var n=e.commit;return Fr.post(Fi,o(t)).then(function(e){var t=e.data;return Hi(t)}).then(function(e){return n("addScan",e),e}).catch(console.error)},deleteScan:function(e,t){var n=e.commit;return Fr.delete("".concat(Fi,"/").concat(t.id,"/")).then(function(){return n("removeScanFromState",t)}).catch(console.error)},updateScan:function(e,t){var n=e.commit;return Fr.patch("".concat(Fi,"/").concat(t.id,"/"),o(t)).then(function(e){var t=e.data;return Hi(t)}).then(function(e){n("updateScanState",e)}).catch(console.error)}},Xi={namespaced:!0,state:Wi,getters:Yi,mutations:Ki,actions:Ji},Zi={namespaced:!0,state:{emailCompleted:!1,emailError:!1,emailLoading:!1,resetCompleted:!1,resetError:!1,resetLoading:!1},actions:{resetPassword:function(e,t){var n=e.commit,r=t.uid,a=t.token,i=t.password1,s=t.password2;return n(vi),oi.resetAccountPassword(r,a,i,s).then(function(){return n(yi)}).catch(function(){return n(gi)})},sendPasswordResetEmail:function(e,t){var n=e.commit,r=t.email;return n(fi),oi.sendAccountPasswordResetEmail(r).then(function(){return n(mi)}).catch(function(){return n(bi)})},clearResetStatus:function(e){var t=e.commit;t(hi)},clearEmailStatus:function(e){var t=e.commit;t(pi)}},mutations:(Fa={},Object(p["a"])(Fa,vi,function(e){e.resetLoading=!0}),Object(p["a"])(Fa,hi,function(e){e.resetCompleted=!1,e.resetError=!1,e.resetLoading=!1}),Object(p["a"])(Fa,gi,function(e){e.resetError=!0,e.resetLoading=!1}),Object(p["a"])(Fa,yi,function(e){e.resetCompleted=!0,e.resetError=!1,e.resetLoading=!1}),Object(p["a"])(Fa,fi,function(e){e.emailLoading=!0}),Object(p["a"])(Fa,pi,function(e){e.emailCompleted=!1,e.emailError=!1,e.emailLoading=!1}),Object(p["a"])(Fa,bi,function(e){e.emailError=!0,e.emailLoading=!1}),Object(p["a"])(Fa,mi,function(e){e.emailCompleted=!0,e.emailError=!1,e.emailLoading=!1}),Fa)},Qi="".concat(Ra,"/research/"),es="".concat(Qi,"/group/"),ts=("".concat(Qi,"/laboratory/"),"".concat(Qi,"/study/")),ns="".concat(Qi,"/subject/"),rs=function(e){var t=e.filters,n=e.pagination;return"?id=".concat(t.id||"","&firstName=").concat(t.firstName||"","&firstName_lookup=icontains&lastName=").concat(t.lastName||"","&lastName_lookup=icontains&sex=").concat(Jt[t.sex]||"","&gender=").concat(Xt[t.gender]||"","&born_after_date=").concat(t.bornAfter||"","&born_before_date=").concat(t.bornBefore||"","&dominant_hand=").concat(Zt[t.dominantHand]||"","&dicom_patient=").concat(t.dicomPatientId||"","&page_size=").concat(n.rowsPerPage||100,"&page=").concat(n.page||1,"&ordering=").concat(n.descending?"-"+n.sortBy:n.sortBy)},as=n("d058"),is={studies:[],groups:[],subjects:[],selectedSubjectId:null},ss={getStudyByTitle:function(e){return function(t){return e.studies.find(function(e){return e.title===t})}},getStudyGroupByTitle:function(e){return function(t){var n=t.study,r=t.groupTitle;return e.groups.find(function(e){return e.title===r&&e.study.id===n.id})}},getGroupByUrl:function(e){return function(t){return e.groups.find(function(e){return e.url===t})}},getStudyGroups:function(e){return function(t){return e.groups.filter(function(e){return e.study.id===t.id})}},getSubjectById:function(e){return function(t){return e.subjects.find(function(e){return e.id===t})}},getSelectedSubject:function(e,t){return t["getSubjectById"](e.selectedSubjectId)},getSubjectByUrl:function(e){return function(t){return e.subjects.find(function(e){return e.url===t})}}},os={setStudies:function(e,t){e.studies=t},setSubjects:function(e,t){e.subjects=t},addSubject:function(e,t){e.subjects.push(t)},setSelectedSubjectId:function(e,t){e.selectedSubjectId=t},setGroups:function(e,t){e.groups=t},addStudy:function(e,t){e.studies.push(t)},updateStudyState:function(e,t){var n=e.studies.indexOf(e.studies.find(function(e){return e.id===t.id})),r=e.studies.slice();r[n]=t,e.studies=r},addGroup:function(e,t){e.groups.push(t)},updateSubjectState:function(e,t){var n=e.subjects.filter(function(e){return e.id!=t.id});n.push(t),e.subjects=n},removeSubjectFromState:function(e,t){e.subjects=e.subjects.filter(function(e){return e.id!=t.id})},removeStudyFromState:function(e,t){e.studies=e.studies.filter(function(e){return e.id!=t.id})}},cs={fetchStudies:function(e){var t=e.commit;return Fr.get(ts).then(function(e){var n=e.data;return t("setStudies",n.results)}).catch(console.error)},fetchSubjects:function(e,t){var n=e.commit,r=t.filters,a=t.pagination,i=rs({filters:r,pagination:a});return Fr.get("".concat(ns,"/").concat(i)).then(function(e){var t=e.data;return t.results.map(function(e){return as(e)})}).then(function(e){return n("setSubjects",e),e}).catch(console.error)},fetchGroups:function(e){var t=e.commit;return Fr.get(es).then(function(e){var n=e.data;return t("setGroups",as(n.results))}).catch(console.error)},createStudy:function(e,t){var n=e.commit;return Fr.post(ts,t).then(function(e){var t=e.data;return as(t)}).then(function(e){return n("addStudy",e)}).catch(console.error)},updateStudy:function(e,t){var n=e.commit;return Fr.patch("".concat(ts,"/").concat(t.id,"/"),o(t)).then(function(e){var t=e.data;return as(t)}).then(function(e){return n("updateStudyState",e),e}).catch(console.error)},deleteStudy:function(e,t){var n=e.commit;return Fr.delete("".concat(ts,"/").concat(t.id,"/")).then(function(){return n("removeStudyFromState",t)}).catch(console.error)},createGroup:function(e,t){var n=e.commit;return Fr.post(es,t).then(function(e){var t=e.data;return as(t)}).then(function(e){return n("addGroup",e)}).catch(console.error)},createSubject:function(e,t){var n=e.commit;return Fr.post(ns,o(t)).then(function(e){var t=e.data;return as(t)}).then(function(e){return n("addSubject",e),e}).catch(console.error)},updateSubject:function(e,t){var n=e.commit;return Fr.patch("".concat(ns,"/").concat(t.id,"/"),o(t)).then(function(e){var t=e.data;return as(t)}).then(function(e){return n("updateSubjectState",e),e}).catch(console.error)},deleteSubject:function(e,t){var n=e.commit;return Fr.delete("".concat(ns,"/").concat(t.id,"/")).then(function(){return n("removeSubjectFromState",t)}).catch(console.error)}},ls={namespaced:!0,state:is,getters:ss,mutations:os,actions:cs};i["a"].use(b["a"]);var us=new b["a"].Store({modules:{accounts:ei,auth:ki,dicom:Ai,mri:Xi,password:Zi,research:ls}}),ds=function(e,t,n){us.dispatch("auth/initialize").then(function(){us.getters["auth/isAuthenticated"]?n():n("/login")})},fs=function(e,t,n){us.dispatch("auth/initialize").then(function(){us.getters["auth/isAuthenticated"]?n("/home"):n()})},ps=function(e,t,n){us.dispatch("auth/logout").then(function(){return n("/login")})};i["a"].use(F["a"]);var bs=new F["a"]({saveScrollPosition:!0,mode:"history",base:"/",routes:[{path:"/",redirect:"/home"},{path:"/home",component:ye,beforeEnter:ds},{path:"/user/:username",name:"userInformation",component:Ae,props:!0},{path:"/login",component:Q,beforeEnter:fs},{path:"/logout",beforeEnter:ps},{path:"*",component:ie},{path:"/about",name:"about",component:function(){return n.e("about").then(n.bind(null,"f820"))}},{path:"/dicom-browser",name:"dicomBrowser",component:Gn,beforeEnter:ds},{path:"/subjects",name:"subjectBrowser",component:Na,beforeEnter:ds},{path:"/studies",name:"studyBrowser",component:cr,beforeEnter:ds}]});i["a"].config.productionTip=!1,i["a"].use(zn.a),new i["a"]({router:bs,store:us,render:function(e){return e(L)}}).$mount("#app")},"5aa5":function(e,t,n){"use strict";var r=n("1f41"),a=n.n(r);a.a},6147:function(e,t,n){},7303:function(e,t,n){},"82e6":function(e,t,n){"use strict";var r=n("7303"),a=n.n(r);a.a},c333:function(e,t,n){"use strict";var r=n("1977"),a=n.n(r);a.a},d768:function(e,t,n){},e8cf:function(e,t,n){},f58a:function(e,t,n){"use strict";var r=n("e8cf"),a=n.n(r);a.a}});
//# sourceMappingURL=app.0a6871dd.js.map